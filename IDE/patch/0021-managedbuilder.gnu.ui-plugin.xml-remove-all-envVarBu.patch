From 4b08e41fa4d0d0d74edf0e32e4bc8adb8461a478 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=E5=BE=90=E6=8C=81=E6=81=92=20Xu=20Chiheng?=
 <chiheng.xu@gmail.com>
Date: Wed, 10 Apr 2024 04:18:03 +0800
Subject: [PATCH 21/41] managedbuilder.gnu.ui/plugin.xml : remove all
 envVarBuildPath elements and references to CygwinPathResolver

---
 .../plugin.xml                                | 527 ++++++------------
 1 file changed, 155 insertions(+), 372 deletions(-)

diff --git a/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml b/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml
index ce11ac1764..271c0d2518 100644
--- a/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml
+++ b/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml
@@ -12,11 +12,9 @@
             fileVersion="4.0.0">
       </managedBuildRevision>
       <tool
-            natureFilter="cnature"
-            name="%ToolName.linker.gnu.c"
+            name="%ToolName.linker.gnu"
             outputFlag="-o"
-            command="gcc"
-            id="cdt.managedbuild.tool.gnu.c.linker"
+            id="cdt.managedbuild.tool.gnu.linker"
             errorParsers="org.eclipse.cdt.core.GLDErrorParser">
             <supportedProperties>
             <property id="org.eclipse.cdt.build.core.buildArtefactType">
@@ -24,121 +22,117 @@
     	        <value id="org.eclipse.cdt.build.core.buildArtefactType.sharedLib"/>
             </property>
             </supportedProperties>
-         <envVarBuildPath 
-         	pathType="buildpathLibrary"
-         	variableList="LIBRARY_PATH">
-         </envVarBuildPath>
          
          <optionCategory
-               owner="cdt.managedbuild.tool.gnu.c.linker"
+               owner="cdt.managedbuild.tool.gnu.linker"
                name="%OptionCategory.General"
-               id="gnu.c.link.category.general">
+               id="gnu.link.category.general">
          </optionCategory>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.NoStartFiles"
-               category="gnu.c.link.category.general"
+               category="gnu.link.category.general"
                command="-nostartfiles"
-               id="gnu.c.link.option.nostart"
+               id="gnu.link.option.nostart"
                valueType="boolean">
          </option>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.NoDefLibs"
-               category="gnu.c.link.category.general"
+               category="gnu.link.category.general"
                command="-nodefaultlibs"
-               id="gnu.c.link.option.nodeflibs"
+               id="gnu.link.option.nodeflibs"
                valueType="boolean">
          </option>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.NoStdLibs"
-               category="gnu.c.link.category.general"
+               category="gnu.link.category.general"
                command="-nostdlib"
-               id="gnu.c.link.option.nostdlibs"
+               id="gnu.link.option.nostdlibs"
                valueType="boolean">
          </option>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.Strip"
-               category="gnu.c.link.category.general"
+               category="gnu.link.category.general"
                command="-s"
-               id="gnu.c.link.option.strip"
+               id="gnu.link.option.strip"
                valueType="boolean">
          </option>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.Static"
-               category="gnu.c.link.category.general"
+               category="gnu.link.category.general"
                command="-static"
-               id="gnu.c.link.option.noshared"
+               id="gnu.link.option.noshared"
                valueType="boolean">
          </option>
          <optionCategory
-               owner="cdt.managedbuild.tool.gnu.c.linker"
+               owner="cdt.managedbuild.tool.gnu.linker"
                name="%OptionCategory.Libs"
-               id="gnu.c.link.category.libs">
+               id="gnu.link.category.libs">
          </optionCategory>
          <option
                name="%Option.Posix.Libs"
-               category="gnu.c.link.category.libs"
+               category="gnu.link.category.libs"
                command="-l"
                commandGenerator="org.eclipse.cdt.managedbuilder.gnu.ui.GnuCLibrariesCommandGenerator"
-               id="gnu.c.link.option.libs"
+               id="gnu.link.option.libs"
                browseType="none"
                valueType="libs">
          </option>
          <option
                name="%Option.Posix.Libsearch"
-               category="gnu.c.link.category.libs"
+               category="gnu.link.category.libs"
                command="-L"
-               id="gnu.c.link.option.paths"
+               id="gnu.link.option.paths"
                browseType="directory"
                valueType="libPaths">
          </option>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.GroupLibs"
-               category="gnu.c.link.category.libs"
-               id="gnu.c.link.option.group"
+               category="gnu.link.category.libs"
+               id="gnu.link.option.group"
                valueType="boolean">
          </option>
          <optionCategory
-               owner="cdt.managedbuild.tool.gnu.c.linker"
+               owner="cdt.managedbuild.tool.gnu.linker"
                name="%OptionCategory.Misc"
-               id="gnu.c.link.category.other">
+               id="gnu.link.category.other">
          </optionCategory>
          <option
                name="%Option.Posix.Linker.Flags"
-               category="gnu.c.link.category.other"
+               category="gnu.link.category.other"
                valueType="string"
-               id="gnu.c.link.option.ldflags">
+               id="gnu.link.option.ldflags">
          </option>
          <option
                name="%Option.Posix.Linker.XLinker"
-               category="gnu.c.link.category.other"
+               category="gnu.link.category.other"
                command="-Xlinker ${VALUE}"
                valueType="stringList"
-               id="gnu.c.link.option.other">
+               id="gnu.link.option.other">
          </option>
          <option
                name="%Option.Posix.UserObjs"
-               category="gnu.c.link.category.other"
+               category="gnu.link.category.other"
                browseType="file"
                valueType="userObjs"
-               id="gnu.c.link.option.userobjs">
+               id="gnu.link.option.userobjs">
          </option>
          <optionCategory
-               owner="cdt.managedbuild.tool.gnu.c.linker"
+               owner="cdt.managedbuild.tool.gnu.linker"
                name="%OptionCategory.Shared.Settings"
-               id="gnu.c.link.category.shared">
+               id="gnu.link.category.shared">
          </optionCategory>
          <option
                defaultValue="false"
                name="%Option.Posix.Linker.Shared"
-               category="gnu.c.link.category.shared"
+               category="gnu.link.category.shared"
                command="-shared"
-               id="gnu.c.link.option.shared"
+               id="gnu.link.option.shared"
                valueType="boolean">
               <enablement 
               	type="CONTAINER_ATTRIBUTE" 
@@ -152,23 +146,30 @@
          </option>
          <option
                name="%Option.Posix.Linker.SOName"
-               category="gnu.c.link.category.shared"
+               category="gnu.link.category.shared"
                command="-Wl,-soname="
-               id="gnu.c.link.option.soname"
+               id="gnu.link.option.soname"
                valueType="string">
          </option>
          <option
+               category="gnu.link.category.shared"
+               commandGenerator="org.eclipse.cdt.managedbuilder.gnu.ImpLibCommandGenerator"
+               id="gnu.link.option.implname"
                name="%Option.Posix.Linker.Implib"
-               category="gnu.c.link.category.shared"
-               command="-Wl,--out-implib="
-               id="gnu.c.link.option.implname"
                valueType="string">
+            <enablement
+                  type="ALL">
+               <checkBuildProperty
+                     property="org.eclipse.cdt.build.core.buildArtefactType"
+                     value="org.eclipse.cdt.build.core.buildArtefactType.sharedLib">
+               </checkBuildProperty>
+            </enablement>
          </option>
          <option
                name="%Option.Posix.Linker.Defname"
-               category="gnu.c.link.category.shared"
+               category="gnu.link.category.shared"
                command="-Wl,--output-def="
-               id="gnu.c.link.option.defname"
+               id="gnu.link.option.defname"
                valueType="string">
          </option>
          <inputType
@@ -177,7 +178,7 @@
 			multipleOfType="true"
             dependencyCalculator="org.eclipse.cdt.managedbuilder.makegen.internal.DefaultNoDependencyCalculator"
             buildVariable="OBJS"
-            id="cdt.managedbuild.tool.gnu.c.linker.input">
+            id="cdt.managedbuild.tool.gnu.linker.input">
             <additionalInput
             	paths="$(USER_OBJS)"
             	kind="additionalinputdependency">
@@ -191,11 +192,11 @@
 			outputs=""
             buildVariable="EXECUTABLES"
             nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider"
-            id="cdt.managedbuild.tool.gnu.c.linker.output">
+            id="cdt.managedbuild.tool.gnu.linker.output">
              <enablement 
               	type="ALL">
 			  	<checkOption 
-			  		optionId="gnu.c.link.option.shared"
+			  		optionId="gnu.link.option.shared"
 			  		value="false"/>
 			  </enablement>
          </outputType>
@@ -204,11 +205,11 @@
 			outputPrefix="lib"
             nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider"
 			buildVariable="LIBRARIES"
-			id="cdt.managedbuild.tool.gnu.c.linker.output.so">
+			id="cdt.managedbuild.tool.gnu.linker.output.so">
              <enablement 
               	type="ALL">
 			  	<checkOption 
-			  		optionId="gnu.c.link.option.shared"
+			  		optionId="gnu.link.option.shared"
 			  		value="true"/>
 			  </enablement>
 		 </outputType>
@@ -216,7 +217,7 @@
                applicabilityCalculator="org.eclipse.cdt.managedbuilder.gnu.ui.ProfAppCalculator"
                command="-p"
                defaultValue="false"
-               id="gnu.c.link.option.debugging.prof"
+               id="gnu.link.option.debugging.prof"
                name="%Option.Posix.Debug.prof"
                valueType="boolean">
          </option>
@@ -224,7 +225,7 @@
                applicabilityCalculator="org.eclipse.cdt.managedbuilder.gnu.ui.GprofAppCalculator"
                command="-pg"
                defaultValue="false"
-               id="gnu.c.link.option.debugging.gprof"
+               id="gnu.link.option.debugging.gprof"
                name="%Option.Posix.Debug.gprof"
                valueType="boolean">
          </option>
@@ -232,227 +233,24 @@
 			  applicabilityCalculator="org.eclipse.cdt.managedbuilder.gnu.ui.GcovAppCalculator"
 			  command="-ftest-coverage -fprofile-arcs"
 			  defaultValue="false"
-			  id="gnu.c.link.option.debugging.codecov"
+			  id="gnu.link.option.debugging.codecov"
 			  name="%Option.codecov"
 			  valueType="boolean">
 		  </option>
       </tool>
       <tool
-            natureFilter="ccnature"
-            name="%ToolName.linker.gnu.cpp"
-            outputFlag="-o"
+            command="gcc"
+            id="cdt.managedbuild.tool.gnu.c.linker"
+            name="%ToolName.linker.gnu.c"
+            natureFilter="cnature"
+            superClass="cdt.managedbuild.tool.gnu.linker">
+      </tool>
+      <tool
             command="g++"
             id="cdt.managedbuild.tool.gnu.cpp.linker"
-            errorParsers="org.eclipse.cdt.core.GLDErrorParser">
-            <supportedProperties>
-            <property id="org.eclipse.cdt.build.core.buildArtefactType">
-	            <value id="org.eclipse.cdt.build.core.buildArtefactType.exe"/>
-    	        <value id="org.eclipse.cdt.build.core.buildArtefactType.sharedLib"/>
-            </property>
-            </supportedProperties>
-         <envVarBuildPath 
-         	pathType="buildpathLibrary"
-         	variableList="LIBRARY_PATH">
-         </envVarBuildPath>
-         <optionCategory
-               owner="cdt.managedbuild.tool.gnu.cpp.linker"
-               name="%OptionCategory.General"
-               id="gnu.cpp.link.category.options">
-         </optionCategory>
-         <option
-               defaultValue="false"
-               name="%Option.Posix.Linker.NoStartFiles"
-               category="gnu.cpp.link.category.options"
-               command="-nostartfiles"
-               id="gnu.cpp.link.option.nostart"
-               valueType="boolean">
-         </option>
-         <option
-               defaultValue="false"
-               name="%Option.Posix.Linker.NoDefLibs"
-               category="gnu.cpp.link.category.options"
-               command="-nodefaultlibs"
-               id="gnu.cpp.link.option.nodeflibs"
-               valueType="boolean">
-         </option>
-         <option
-               defaultValue="false"
-               name="%Option.Posix.Linker.NoStdLibs"
-               category="gnu.cpp.link.category.options"
-               command="-nostdlib"
-               id="gnu.cpp.link.option.nostdlibs"
-               valueType="boolean">
-         </option>
-         <option
-               defaultValue="false"
-               name="%Option.Posix.Linker.Strip"
-               category="gnu.cpp.link.category.options"
-               command="-s"
-               id="gnu.cpp.link.option.strip"
-               valueType="boolean">
-         </option>
-         <optionCategory
-               owner="cdt.managedbuild.tool.gnu.cpp.linker"
-               name="%OptionCategory.Libs"
-               id="gnu.cpp.link.category.libs">
-         </optionCategory>
-         <option
-               name="%Option.Posix.Libs"
-               category="gnu.cpp.link.category.libs"
-               command="-l"
-               commandGenerator="org.eclipse.cdt.managedbuilder.gnu.ui.GnuCppLibrariesCommandGenerator"
-               id="gnu.cpp.link.option.libs"
-               browseType="none"
-               valueType="libs">
-         </option>
-         <option
-               name="%Option.Posix.Libsearch"
-               category="gnu.cpp.link.category.libs"
-               command="-L"
-               id="gnu.cpp.link.option.paths"
-               browseType="directory"
-               valueType="libPaths">
-         </option>
-         <option
-               defaultValue="false"
-               name="%Option.Posix.Linker.GroupLibs"
-               category="gnu.cpp.link.category.libs"
-               id="gnu.cpp.link.option.group"
-               valueType="boolean">
-         </option>
-         <optionCategory
-               owner="cdt.managedbuild.tool.gnu.cpp.linker"
-               name="%OptionCategory.Misc"
-               id="gnu.cpp.link.category.other">
-         </optionCategory>
-         <option
-               name="%Option.Posix.Linker.Flags"
-               category="gnu.cpp.link.category.other"
-               valueType="string"
-               id="gnu.cpp.link.option.flags">
-         </option>
-         <option
-               name="%Option.Posix.Linker.XLinker"
-               category="gnu.cpp.link.category.other"
-               command="-Xlinker ${VALUE}"
-               valueType="stringList"
-               id="gnu.cpp.link.option.other">
-         </option>
-         <option
-               name="%Option.Posix.UserObjs"
-               category="gnu.cpp.link.category.other"
-               browseType="file"
-               valueType="userObjs"
-               id="gnu.cpp.link.option.userobjs">
-         </option>
-         <optionCategory
-               owner="cdt.managedbuild.tool.gnu.cpp.linker"
-               name="%OptionCategory.Shared.Settings"
-               id="gnu.cpp.link.category.shared">
-         </optionCategory>
-         <option
-               defaultValue="false"
-               name="%Option.Posix.Linker.Shared"
-               category="gnu.cpp.link.category.shared"
-               command="-shared"
-               valueType="boolean"
-               id="gnu.cpp.link.option.shared">
-               <enablement 
-              	type="CONTAINER_ATTRIBUTE" 
-              	attribute="defaultValue" 
-              	value="true"
-              	extensionAdjustment="false">
-			  	<checkBuildProperty 
-			  		property="org.eclipse.cdt.build.core.buildArtefactType"
-			  		value="org.eclipse.cdt.build.core.buildArtefactType.sharedLib"/>
-			  </enablement>
-         </option>
-         <option
-               name="%Option.Posix.Linker.SOName"
-               category="gnu.cpp.link.category.shared"
-               command="-Wl,-soname="
-               valueType="string"
-               id="gnu.cpp.link.option.soname">
-         </option>
-         <option
-               name="%Option.Posix.Linker.Implib"
-               category="gnu.cpp.link.category.shared"
-               command="-Wl,--out-implib="
-               valueType="string"
-               id="gnu.cpp.link.option.implname">
-         </option>
-         <option
-               name="%Option.Posix.Linker.Defname"
-               category="gnu.cpp.link.category.shared"
-               command="-Wl,--output-def="
-               valueType="string"
-               id="gnu.cpp.link.option.defname">
-         </option>
-         <inputType
-            sourceContentType="org.eclipse.cdt.managedbuilder.core.compiledObjectFile"
-            sources="o"
-			multipleOfType="true"
-            dependencyCalculator="org.eclipse.cdt.managedbuilder.makegen.internal.DefaultNoDependencyCalculator"
-            buildVariable="OBJS"
-            id="cdt.managedbuild.tool.gnu.cpp.linker.input">
-            <additionalInput
-            	paths="$(USER_OBJS)"
-            	kind="additionalinputdependency">
-            </additionalInput>
-            <additionalInput
-            	paths="$(LIBS)"
-            	kind="additionalinput">
-            </additionalInput>
-         </inputType>
-         <outputType
-			outputs=""
-            buildVariable="EXECUTABLES"
-            nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider"
-            id="cdt.managedbuild.tool.gnu.cpp.linker.output">
-              <enablement 
-              	type="ALL">
-			  	<checkOption 
-			  		optionId="gnu.cpp.link.option.shared"
-			  		value="false"/>
-			  </enablement>
-         </outputType>
-         <outputType
-			  outputs="so"
-			  outputPrefix="lib"
-            nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider"
-	          buildVariable="LIBRARIES"
-              id="cdt.managedbuild.tool.gnu.cpp.linker.output.so">
-              <enablement 
-              	type="ALL">
-			  	<checkOption 
-			  		optionId="gnu.cpp.link.option.shared"
-			  		value="true"/>
-			  </enablement>
-         </outputType>
-         <option
-               applicabilityCalculator="org.eclipse.cdt.managedbuilder.gnu.ui.ProfAppCalculator"
-               command="-p"
-               defaultValue="false"
-               id="gnu.cpp.link.option.debugging.prof"
-               name="%Option.Posix.Debug.prof"
-               valueType="boolean">
-         </option>
-         <option
-               applicabilityCalculator="org.eclipse.cdt.managedbuilder.gnu.ui.GprofAppCalculator"
-               command="-pg"
-               defaultValue="false"
-               id="gnu.cpp.link.option.debugging.gprof"
-               name="%Option.Posix.Debug.gprof"
-               valueType="boolean">
-         </option>
-         <option
-			  applicabilityCalculator="org.eclipse.cdt.managedbuilder.gnu.ui.GcovAppCalculator"
-			  command="-ftest-coverage -fprofile-arcs"
-			  defaultValue="false"
-			  id="gnu.cpp.link.option.debugging.codecov"
-			  name="%Option.codecov"
-			  valueType="boolean">
-		  </option>
+            name="%ToolName.linker.gnu.cpp"
+            natureFilter="ccnature"
+            superClass="cdt.managedbuild.tool.gnu.linker">
       </tool>
       <tool
             natureFilter="both"
@@ -628,10 +426,6 @@
     	        <value id="org.eclipse.cdt.build.core.buildArtefactType.sharedLib"/>
             </property>
             </supportedProperties>
-         <envVarBuildPath 
-         	pathType="buildpathLibrary"
-         	variableList="LIBRARY_PATH">
-         </envVarBuildPath>
          
          <optionCategory
                owner="cdt.managedbuild.tool.macosx.c.linker"
@@ -819,10 +613,6 @@
     	        <value id="org.eclipse.cdt.build.core.buildArtefactType.sharedLib"/>
             </property>
             </supportedProperties>
-         <envVarBuildPath 
-         	pathType="buildpathLibrary"
-         	variableList="LIBRARY_PATH">
-         </envVarBuildPath>
          <optionCategory
                owner="cdt.managedbuild.tool.macosx.cpp.linker"
                name="%OptionCategory.General"
@@ -985,10 +775,6 @@
     	        <value id="org.eclipse.cdt.build.core.buildType.release"/>
             </property>
             </supportedProperties>
-         <envVarBuildPath 
-         	pathType="buildpathInclude"
-         	variableList="CPATH,C_INCLUDE_PATH">
-         </envVarBuildPath>
 		  <optionCategory
 			  owner="cdt.managedbuild.tool.gnu.c.compiler"
 			  name="%OptionCategory.Dialect"
@@ -1534,10 +1320,6 @@
     	        <value id="org.eclipse.cdt.build.core.buildType.release"/>
             </property>
             </supportedProperties>
-         <envVarBuildPath 
-         	pathType="buildpathInclude"
-         	variableList="CPATH,CPLUS_INCLUDE_PATH">
-         </envVarBuildPath>
 		  <optionCategory
 			  owner="cdt.managedbuild.tool.gnu.cpp.compiler"
 			  name="%OptionCategory.Dialect"
@@ -2122,56 +1904,74 @@
           id="cdt.managedbuild.tool.gnu.c.linker.cygwin"
           name="%ToolName.linker.cygwin.gnu.c"
           superClass="cdt.managedbuild.tool.gnu.c.linker">
-          <envVarBuildPath 
-              pathType="buildpathLibrary"
-              variableList="LIBRARY_PATH"
-              buildPathResolver="org.eclipse.cdt.managedbuilder.gnu.cygwin.CygwinPathResolver">
-          </envVarBuildPath>
           <outputType
 			  outputs="exe"
-              superClass="cdt.managedbuild.tool.gnu.c.linker.output"
+              superClass="cdt.managedbuild.tool.gnu.linker.output"
               id="cdt.managedbuild.tool.gnu.c.linker.cygwin.output">
           </outputType>
 		  <outputType
-	          outputs="dll,a.dll"
-	          outputPrefix=""
+	          outputs="dll,dll.a"
+	          outputPrefix="cyg"
 			  buildVariable="LIBRARIES"
 			  id="cdt.managedbuild.tool.gnu.c.linker.cygwin.output.so"
-			  superClass="cdt.managedbuild.tool.gnu.c.linker.output.so">
+			  superClass="cdt.managedbuild.tool.gnu.linker.output.so">
 	      </outputType>
       </tool>
       <tool
           id="cdt.managedbuild.tool.gnu.cpp.linker.cygwin"
           name="%ToolName.linker.cygwin.gnu.cpp"
           superClass="cdt.managedbuild.tool.gnu.cpp.linker">
-          <envVarBuildPath 
-              pathType="buildpathLibrary"
-              variableList="LIBRARY_PATH"
-              buildPathResolver="org.eclipse.cdt.managedbuilder.gnu.cygwin.CygwinPathResolver">
-          </envVarBuildPath>
 		  <outputType
 			  outputs="exe"
-              superClass="cdt.managedbuild.tool.gnu.cpp.linker.output"
+              superClass="cdt.managedbuild.tool.gnu.linker.output"
 			  id="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.output">
 		  </outputType>
 		  <outputType
-	          outputs="dll,a.dll"
-	          outputPrefix=""
+	          outputs="dll,dll.a"
+	          outputPrefix="cyg"
 			  buildVariable="LIBRARIES"
 			  id="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.output.so"
-			  superClass="cdt.managedbuild.tool.gnu.cpp.linker.output.so">
+			  superClass="cdt.managedbuild.tool.gnu.linker.output.so">
+	      </outputType>
+      </tool>
+      <tool
+            id="cdt.managedbuild.tool.gnu.c.linker.mingw"
+            name="%ToolName.linker.mingw.gnu.c"
+            superClass="cdt.managedbuild.tool.gnu.c.linker">
+			<outputType
+				outputs="exe"
+				superClass="cdt.managedbuild.tool.gnu.linker.output"
+				id="cdt.managedbuild.tool.gnu.c.linker.mingw.output">
+			</outputType>
+			<outputType
+				outputs="dll,dll.a"
+				outputPrefix="lib"
+				buildVariable="LIBRARIES"
+				id="cdt.managedbuild.tool.gnu.c.linker.mingw.output.so"
+				superClass="cdt.managedbuild.tool.gnu.linker.output.so">
+			</outputType>
+      </tool>
+      <tool
+            id="cdt.managedbuild.tool.gnu.cpp.linker.mingw"
+            name="%ToolName.linker.mingw.gnu.cpp"
+            superClass="cdt.managedbuild.tool.gnu.cpp.linker">
+		  <outputType
+			  outputs="exe"
+              superClass="cdt.managedbuild.tool.gnu.linker.output"
+			  id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.output">
+		  </outputType>
+		  <outputType
+	          outputs="dll,dll.a"
+	          outputPrefix="lib"
+			  buildVariable="LIBRARIES"
+			  id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.output.so"
+			  superClass="cdt.managedbuild.tool.gnu.linker.output.so">
 	      </outputType>
-		  
       </tool>
       <tool
           id="cdt.managedbuild.tool.gnu.c.compiler.cygwin"
           name="%ToolName.compiler.cygwin.gnu.c"
           superClass="cdt.managedbuild.tool.gnu.c.compiler">
-          <envVarBuildPath 
-              pathType="buildpathInclude"
-              variableList="CPATH,C_INCLUDE_PATH"
-              buildPathResolver="org.eclipse.cdt.managedbuilder.gnu.cygwin.CygwinPathResolver">
-          </envVarBuildPath>
           <inputType
           	  id="cdt.managedbuild.tool.gnu.c.compiler.input.cygwin"
               superClass="cdt.managedbuild.tool.gnu.c.compiler.input"
@@ -2181,16 +1981,29 @@
           id="cdt.managedbuild.tool.gnu.cpp.compiler.cygwin"
           name="%ToolName.compiler.cygwin.gnu.cpp"
           superClass="cdt.managedbuild.tool.gnu.cpp.compiler">
-          <envVarBuildPath 
-              pathType="buildpathInclude"
-              variableList="CPATH,CPLUS_INCLUDE_PATH"
-              buildPathResolver="org.eclipse.cdt.managedbuilder.gnu.cygwin.CygwinPathResolver">
-          </envVarBuildPath>
           <inputType
           	  id="cdt.managedbuild.tool.gnu.cpp.compiler.input.cygwin"
               superClass="cdt.managedbuild.tool.gnu.cpp.compiler.input"
           />
       </tool>      
+      <tool
+          id="cdt.managedbuild.tool.gnu.c.compiler.mingw"
+          name="%ToolName.compiler.mingw.gnu.c"
+          superClass="cdt.managedbuild.tool.gnu.c.compiler">
+          <inputType
+          	  id="cdt.managedbuild.tool.gnu.c.compiler.input.mingw"
+              superClass="cdt.managedbuild.tool.gnu.c.compiler.input"
+          />
+      </tool>      
+      <tool
+          id="cdt.managedbuild.tool.gnu.cpp.compiler.mingw"
+          name="%ToolName.compiler.mingw.gnu.cpp"
+          superClass="cdt.managedbuild.tool.gnu.cpp.compiler">
+          <inputType
+          	  id="cdt.managedbuild.tool.gnu.cpp.compiler.input.mingw"
+              superClass="cdt.managedbuild.tool.gnu.cpp.compiler.input"
+          />
+      </tool>      
 
 	  <builder
 	  	  isAbstract="true"
@@ -2278,7 +2091,7 @@
                       id="cdt.managedbuild.tool.gnu.c.linker.base"
                       superClass="cdt.managedbuild.tool.gnu.c.linker">
                      <option
-                           category="gnu.c.link.category.general"
+                           category="gnu.link.category.general"
                            command="-pthread"
                            defaultValue="false"
                            id="gnu.c.link.option.pthread"
@@ -2299,7 +2112,7 @@
                       id="cdt.managedbuild.tool.gnu.cpp.linker.base"
                       superClass="cdt.managedbuild.tool.gnu.cpp.linker">
                      <option
-                           category="gnu.cpp.link.category.options"
+                           category="gnu.link.category.general"
                            command="-pthread"
                            defaultValue="false"
                            id="gnu.cpp.link.option.pthread"
@@ -2430,16 +2243,15 @@
 				  </tool>                 
                   <tool
                       id="cdt.managedbuild.tool.gnu.cpp.compiler.mingw.base"
-                      superClass="cdt.managedbuild.tool.gnu.cpp.compiler">
+                      superClass="cdt.managedbuild.tool.gnu.cpp.compiler.mingw">
                   </tool>
                   <tool
 					  id="cdt.managedbuild.tool.gnu.c.compiler.mingw.base"
-                      superClass="cdt.managedbuild.tool.gnu.c.compiler">
+                      superClass="cdt.managedbuild.tool.gnu.c.compiler.mingw">
                   </tool>
                   <tool
                       id="cdt.managedbuild.tool.gnu.c.linker.mingw.base"
-                      name="%ToolName.linker.mingw.gnu.c"
-                      superClass="cdt.managedbuild.tool.gnu.c.linker">
+                      superClass="cdt.managedbuild.tool.gnu.c.linker.mingw">
                <enablement 
               	type="ALL">
               	<not>
@@ -2448,17 +2260,11 @@
 			  		value="org.eclipse.cdt.build.core.buildArtefactType.staticLib"/>
 			  	</not>
 			  </enablement>
-			  <outputType
-                   id="cdt.managedbuild.tool.gnu.c.linker.mingw.so.output.base"
-                   superClass="cdt.managedbuild.tool.gnu.c.linker.output.so"
-                   outputs="dll">
-			    </outputType>
 			  
                   </tool>
                   <tool
                       id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.base"
-                      name="%ToolName.linker.mingw.gnu.cpp"
-                      superClass="cdt.managedbuild.tool.gnu.cpp.linker">
+                      superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw">
                <enablement 
               	type="ALL">
               	<not>
@@ -2467,11 +2273,6 @@
 			  		value="org.eclipse.cdt.build.core.buildArtefactType.staticLib"/>
 			  	</not>
 			  </enablement>
-			  	<outputType
-                   id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.so.output.base"
-                   superClass="cdt.managedbuild.tool.gnu.cpp.linker.output.so"
-                   outputs="dll">
-			    </outputType>
                   </tool>                  
 
                </toolChain>                                   
@@ -2826,10 +2627,10 @@
 					  superClass="cdt.managedbuild.tool.gnu.c.linker.base">
 					  <option
 						  id="gnu.c.link.so.debug.option.shared"
-						  superClass="gnu.c.link.option.shared">
+						  superClass="gnu.link.option.shared">
 					  </option>
 			          <outputType
-			              superClass="cdt.managedbuild.tool.gnu.c.linker.output.so"
+			              superClass="cdt.managedbuild.tool.gnu.linker.output.so"
 			              id="cdt.managedbuild.tool.gnu.c.linker.so.debug.output">
 			          </outputType>
 				  </tool>
@@ -2838,10 +2639,10 @@
 					  superClass="cdt.managedbuild.tool.gnu.cpp.linker.base">
 					  <option
 						  id="gnu.cpp.link.so.debug.option.shared"
-						  superClass="gnu.cpp.link.option.shared">
+						  superClass="gnu.link.option.shared">
 					  </option>
 			          <outputType
-			              superClass="cdt.managedbuild.tool.gnu.cpp.linker.output.so"
+			              superClass="cdt.managedbuild.tool.gnu.linker.output.so"
 			              id="cdt.managedbuild.tool.gnu.cpp.linker.so.debug.output">
 			          </outputType>
 				  </tool>
@@ -2897,10 +2698,10 @@
 					  superClass="cdt.managedbuild.tool.gnu.c.linker.base">
 					  <option
 						  id="gnu.c.link.so.release.option.shared"
-						  superClass="gnu.c.link.option.shared">
+						  superClass="gnu.link.option.shared">
 					  </option>
 			          <outputType
-			              superClass="cdt.managedbuild.tool.gnu.c.linker.output.so"
+			              superClass="cdt.managedbuild.tool.gnu.linker.output.so"
 			              id="cdt.managedbuild.tool.gnu.c.linker.so.release.output">
 			          </outputType>
 				  </tool>
@@ -2909,10 +2710,10 @@
 					  superClass="cdt.managedbuild.tool.gnu.cpp.linker.base">
 					  <option
 						  id="gnu.cpp.link.so.release.option.shared"
-						  superClass="gnu.cpp.link.option.shared">
+						  superClass="gnu.link.option.shared">
 					  </option>
 			          <outputType
-			              superClass="cdt.managedbuild.tool.gnu.cpp.linker.output.so"
+			              superClass="cdt.managedbuild.tool.gnu.linker.output.so"
 			              id="cdt.managedbuild.tool.gnu.cpp.linker.so.release.output">
 			          </outputType>
 				  </tool>
@@ -3063,7 +2864,6 @@
             isAbstract="false">                                  
          <configuration
                name="%ConfigName.Dbg"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.cygwin.exe.debug"
                parent="cdt.managedbuild.config.gnu.cygwin.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug">
@@ -3118,7 +2918,6 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.cygwin.exe.release"
                parent="cdt.managedbuild.config.gnu.cygwin.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release">
@@ -3180,7 +2979,6 @@
             isTest="false">            
          <configuration
                name="%ConfigName.Dbg"
-               cleanCommand="rm -rf"
                parent="cdt.managedbuild.config.gnu.cygwin.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
                id="cdt.managedbuild.config.gnu.cygwin.so.debug">
@@ -3224,7 +3022,7 @@
                       superClass="cdt.managedbuild.tool.gnu.c.linker.cygwin.base">
                       <option
                           id="gnu.c.link.cygwin.so.debug.option.shared"
-                          superClass="gnu.c.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
 			              superClass="cdt.managedbuild.tool.gnu.c.linker.cygwin.output.so"
@@ -3236,7 +3034,7 @@
                       superClass="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.base">
                       <option
                           id="gnu.cpp.link.cygwin.so.debug.option.shared"
-                          superClass="gnu.cpp.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
 			              superClass="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.output.so"
@@ -3251,7 +3049,6 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-               cleanCommand="rm -rf"
                parent="cdt.managedbuild.config.gnu.cygwin.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
                id="cdt.managedbuild.config.gnu.cygwin.so.release">               
@@ -3295,7 +3092,7 @@
                       superClass="cdt.managedbuild.tool.gnu.c.linker.cygwin.base">
                       <option
                           id="gnu.c.link.cygwin.so.release.option.shared"
-                          superClass="gnu.c.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
 			              superClass="cdt.managedbuild.tool.gnu.c.linker.cygwin.output.so"
@@ -3307,7 +3104,7 @@
                       superClass="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.base">
                       <option
                           id="gnu.cpp.link.cygwin.so.release.option.shared"
-                          superClass="gnu.cpp.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
 			              superClass="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.output.so"
@@ -3331,7 +3128,6 @@
                name="%ConfigName.Dbg"
                parent="cdt.managedbuild.config.gnu.cygwin.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.cygwin.lib.debug">
                <toolChain
                      superClass="cdt.managedbuild.toolchain.gnu.cygwin.base"
@@ -3382,7 +3178,6 @@
                name="%ConfigName.Rel"
                parent="cdt.managedbuild.config.gnu.cygwin.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.cygwin.lib.release">
                <toolChain
                      superClass="cdt.managedbuild.toolchain.gnu.cygwin.base"
@@ -3462,7 +3257,6 @@
             >                                  
          <configuration
                name="%ConfigName.Dbg"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.mingw.exe.debug"
                parent="cdt.managedbuild.config.gnu.mingw.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug">
@@ -3513,7 +3307,6 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.mingw.exe.release"
                parent="cdt.managedbuild.config.gnu.mingw.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release">
@@ -3572,7 +3365,6 @@
             >            
          <configuration
                name="%ConfigName.Dbg"
-               cleanCommand="rm -rf"
                parent="cdt.managedbuild.config.gnu.mingw.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
                id="cdt.managedbuild.config.gnu.mingw.so.debug">
@@ -3612,11 +3404,11 @@
                       superClass="cdt.managedbuild.tool.gnu.c.linker.mingw.base">
                       <option
                           id="gnu.c.link.mingw.so.debug.option.shared"
-                          superClass="gnu.c.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
                    id="cdt.managedbuild.tool.gnu.c.linker.mingw.so.debug.output"
-                   superClass="cdt.managedbuild.tool.gnu.c.linker.mingw.so.output.base">
+                   superClass="cdt.managedbuild.tool.gnu.c.linker.mingw.output.so">
 			          </outputType>
                   </tool>
                   <tool
@@ -3624,11 +3416,11 @@
                       superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw.base">
                       <option
                           id="gnu.cpp.link.mingw.so.debug.option.shared"
-                          superClass="gnu.cpp.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
                    id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.so.debug.output"
-                   superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw.so.output.base">
+                   superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw.output.so">
 			          </outputType>
                   </tool>                  
 				  <tool
@@ -3639,7 +3431,6 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-               cleanCommand="rm -rf"
                parent="cdt.managedbuild.config.gnu.mingw.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
                id="cdt.managedbuild.config.gnu.mingw.so.release">               
@@ -3679,11 +3470,11 @@
                       superClass="cdt.managedbuild.tool.gnu.c.linker.mingw.base">
                       <option
                           id="gnu.c.link.mingw.so.release.option.shared"
-                          superClass="gnu.c.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
                    id="cdt.managedbuild.tool.gnu.c.linker.mingw.so.release.output"
-                   superClass="cdt.managedbuild.tool.gnu.c.linker.mingw.so.output.base">
+                   superClass="cdt.managedbuild.tool.gnu.c.linker.mingw.output.so">
 			          </outputType>
                   </tool>
                   <tool
@@ -3691,11 +3482,11 @@
                       superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw.base">
                       <option
                           id="gnu.cpp.link.mingw.so.release.option.shared"
-                          superClass="gnu.cpp.link.option.shared">
+                          superClass="gnu.link.option.shared">
                       </option>
 			          <outputType
                    id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.so.release.output"
-                   superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw.so.output.base">
+                   superClass="cdt.managedbuild.tool.gnu.cpp.linker.mingw.output.so">
 			          </outputType>
                   </tool>
 				  <tool
@@ -3716,7 +3507,6 @@
                name="%ConfigName.Dbg"
                parent="cdt.managedbuild.config.gnu.mingw.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.mingw.lib.debug">
                <toolChain
                      superClass="cdt.managedbuild.toolchain.gnu.mingw.base"
@@ -3763,7 +3553,6 @@
                name="%ConfigName.Rel"
                parent="cdt.managedbuild.config.gnu.mingw.base"
                buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.gnu.mingw.lib.release">
                <toolChain
                      superClass="cdt.managedbuild.toolchain.gnu.mingw.base"
@@ -3837,7 +3626,6 @@
             isAbstract="false">
          <configuration
                name="%ConfigName.Dbg"
-               cleanCommand="rm -rf"
             buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
 			   parent="cdt.managedbuild.config.gnu.macosx.base"               
                id="cdt.managedbuild.config.gnu.macosx.exe.debug">
@@ -3892,8 +3680,7 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-            buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
-               cleanCommand="rm -rf"               
+            buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"               
                id="cdt.managedbuild.config.macosx.exe.release"
                parent="cdt.managedbuild.config.gnu.macosx.base"       >
                <toolChain
@@ -3954,7 +3741,6 @@
             isAbstract="false">            
          <configuration
                name="%ConfigName.Dbg"
-               cleanCommand="rm -rf"
 			   parent="cdt.managedbuild.config.gnu.macosx.base"                                     
              buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
                id="cdt.managedbuild.config.macosx.so.debug">
@@ -4033,8 +3819,7 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-               parent="cdt.managedbuild.config.gnu.macosx.base"       
-               cleanCommand="rm -rf"
+               parent="cdt.managedbuild.config.gnu.macosx.base"
             buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
                id="cdt.managedbuild.config.macosx.so.release">
                <toolChain
@@ -4121,7 +3906,6 @@
                name="%ConfigName.Dbg"
                parent="cdt.managedbuild.config.gnu.macosx.base"       
             buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
-               cleanCommand="rm -rf"
                id="cdt.managedbuild.config.macosx.lib.debug">
                <toolChain
 					 superClass="cdt.managedbuild.toolchain.gnu.macosx.base"
@@ -4170,8 +3954,7 @@
          </configuration>
          <configuration
                name="%ConfigName.Rel"
-               parent="cdt.managedbuild.config.gnu.macosx.base"       
-               cleanCommand="rm -rf"
+               parent="cdt.managedbuild.config.gnu.macosx.base"
 	            buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
                id="cdt.managedbuild.config.macosx.lib.release">
                <toolChain
-- 
2.42.1

