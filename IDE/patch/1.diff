git_diff_branch...HEAD  # at /cygdrive/e/Note/IDE/cdt started
no ~commit-message.txt


current branch  : test0018
cat .git/branch : test0000
branch          : test0000


git diff test0000...HEAD
git diff test0000...test0018
git diff $(git merge-base test0000 test0018) test0018


git_diff test0000...HEAD  # at /cygdrive/e/Note/IDE/cdt started
 build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml                                                           |  47 ++----------------
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/BinaryFilePresentation.java                           |  56 ----------------------
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IBinary.java                                          |   8 ----
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ICProject.java                                        |   4 ++
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IIncludeReferenceContainer.java                       |  22 +++++++++
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ILibraryReferenceContainer.java                       |  22 +++++++++
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/Binary.java                                  |  25 ++++------
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/BinaryContainer.java                         |   2 +-
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CContainer.java                              |   2 +-
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProject.java                                |  24 +++++-----
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProjectInfo.java                            |  38 +++++++--------
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/DeltaProcessor.java                          |  53 +-------------------
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainer.java               |  78 ++++++++++++++++++++++++++++++
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainerInfo.java           |  30 ++++++++++++
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainer.java               |  78 ++++++++++++++++++++++++++++++
 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainerInfo.java           |  30 ++++++++++++
 core/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/pdom/indexer/TranslationUnitCollector.java        |   2 +
 core/org.eclipse.cdt.core/src/org/eclipse/cdt/internal/core/CCorePluginResources.properties                      |   2 +
 core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/coff/parser/PEParser64.java                                |  10 ++++
 core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/debug/dwarf/DwarfReader.java                               |  11 ++++-
 core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/elf/parser/ElfParser.java                                  |   9 ++++
 core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/BaseCElementContentProvider.java                         |  67 +-------------------------
 core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/cview/CViewContentProvider.java                          | 208 ++++++++++++++++++-------------------------------------------------------------
 core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/viewsupport/CElementLabelComposer.java                   |   5 ++
 core/org.eclipse.cdt.ui/src/org/eclipse/cdt/ui/CElementContentProvider.java                                      |   2 +-
 debug/org.eclipse.cdt.debug.ui/src/org/eclipse/cdt/debug/ui/importexecutable/AbstractImportExecutableWizard.java |  10 +++-
 llvm/org.eclipse.cdt.managedbuilder.llvm.ui/plugin.xml                                                           |  16 ++-----
 27 files changed, 410 insertions(+), 451 deletions(-)
 delete mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/BinaryFilePresentation.java
 create mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IIncludeReferenceContainer.java
 create mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ILibraryReferenceContainer.java
 create mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainer.java
 create mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainerInfo.java
 create mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainer.java
 create mode 100644 core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainerInfo.java

diff --git a/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml b/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml
index 7dbe4a4610..d1405e9560 100644
--- a/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml
+++ b/build/org.eclipse.cdt.managedbuilder.gnu.ui/plugin.xml
@@ -258,7 +258,6 @@
 		</tool>
 		<tool
 			natureFilter="both"
-			isAbstract="true"
 			name="%ToolName.archiver.gnu"
 			command="ar"
 			id="cdt.managedbuild.tool.gnu.archiver">
@@ -1329,7 +1328,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.gnu.linker.output.exe"
-				id="cdt.managedbuild.tool.gnu.c.linker.cygwin.output">
+				id="cdt.managedbuild.tool.gnu.c.linker.cygwin.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -1346,7 +1345,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.gnu.linker.output.exe"
-				id="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.output">
+				id="cdt.managedbuild.tool.gnu.cpp.linker.cygwin.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -1363,7 +1362,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.gnu.linker.output.exe"
-				id="cdt.managedbuild.tool.gnu.c.linker.mingw.output">
+				id="cdt.managedbuild.tool.gnu.c.linker.mingw.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -1380,7 +1379,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.gnu.linker.output.exe"
-				id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.output">
+				id="cdt.managedbuild.tool.gnu.cpp.linker.mingw.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -1411,7 +1410,6 @@
 			superClass="cdt.managedbuild.tool.gnu.cpp.compiler">
 		</tool>
 		<builder
-			isAbstract="true"
 			id="cdt.managedbuild.target.gnu.builder"
 			command="make"
 			arguments=""
@@ -1466,54 +1464,18 @@
 			<tool
 				id="cdt.managedbuild.tool.gnu.c.compiler.linux.base"
 				superClass="cdt.managedbuild.tool.gnu.c.compiler">
-				<option
-					category="gnu.compiler.category.other"
-					command="-pthread"
-					defaultValue="false"
-					id="gnu.c.compiler.option.pthread"
-					name="%Option.Pthread"
-					tip="%Option.PthreadCompilerTip"
-					valueType="boolean">
-				</option>
 			</tool>
 			<tool
 				id="cdt.managedbuild.tool.gnu.cpp.compiler.linux.base"
 				superClass="cdt.managedbuild.tool.gnu.cpp.compiler">
-				<option
-					category="gnu.compiler.category.other"
-					command="-pthread"
-					defaultValue="false"
-					id="gnu.cpp.compiler.option.pthread"
-					name="%Option.Pthread"
-					tip="%Option.PthreadCompilerTip"
-					valueType="boolean">
-				</option>
 			</tool>
 			<tool
 				id="cdt.managedbuild.tool.gnu.c.linker.linux.base"
 				superClass="cdt.managedbuild.tool.gnu.c.linker">
-				<option
-					category="gnu.link.category.general"
-					command="-pthread"
-					defaultValue="false"
-					id="gnu.c.link.option.pthread"
-					name="%Option.Pthread"
-					tip="%Option.PthreadLinkerTip"
-					valueType="boolean">
-				</option>
 			</tool>
 			<tool
 				id="cdt.managedbuild.tool.gnu.cpp.linker.linux.base"
 				superClass="cdt.managedbuild.tool.gnu.cpp.linker">
-				<option
-					category="gnu.link.category.general"
-					command="-pthread"
-					defaultValue="false"
-					id="gnu.cpp.link.option.pthread"
-					name="%Option.Pthread"
-					tip="%Option.PthreadLinkerTip"
-					valueType="boolean">
-				</option>
 			</tool>
 		</toolChain>
 		<toolChain
@@ -1579,7 +1541,6 @@
 			</targetPlatform>
 			<builder
 				id="cdt.managedbuild.tool.gnu.builder.mingw.base"
-				isAbstract="false"
 				isVariableCaseSensitive="false"
 				superClass="org.eclipse.cdt.build.core.internal.builder">
 			</builder>
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/BinaryFilePresentation.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/BinaryFilePresentation.java
deleted file mode 100644
index 63b74a9564..0000000000
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/BinaryFilePresentation.java
+++ /dev/null
@@ -1,56 +0,0 @@
-/*******************************************************************************
- * Copyright (c) 2007 Wind River Systems, Inc. and others.
- *
- * This program and the accompanying materials
- * are made available under the terms of the Eclipse Public License 2.0
- * which accompanies this distribution, and is available at
- * https://www.eclipse.org/legal/epl-2.0/
- *
- * SPDX-License-Identifier: EPL-2.0
- *
- * Contributors:
- *    Markus Schorn - initial API and implementation
- *******************************************************************************/
-package org.eclipse.cdt.core.model;
-
-import org.eclipse.cdt.core.IBinaryParser.IBinaryFile;
-
-/**
- * Allows to configure the presentation of binaries.
- *
- * <p> Clients may create subclasses. </p>
- * @since 4.0.1.
- */
-public abstract class BinaryFilePresentation {
-
-	final protected IBinaryFile fBinaryFile;
-
-	/**
-	 * Constructs the presentation object for a binary file.
-	 */
-	public BinaryFilePresentation(IBinaryFile binFile) {
-		fBinaryFile = binFile;
-	}
-
-	/**
-	 * Default implementation for showing binaries as part of the binary container.
-	 * It is used whenever a IBinaryFile is not adaptable to BinaryFilePresentation.
-	 */
-	public static boolean showInBinaryContainer(IBinaryFile bin) {
-		switch (bin.getType()) {
-		case IBinaryFile.EXECUTABLE:
-		case IBinaryFile.SHARED:
-			return true;
-		}
-		return false;
-	}
-
-	/**
-	 * Determines whether a binary is to be shown as part of the binary container.
-	 * The default implementation returns <code>true</code> for executables and
-	 * dynamic libraries.
-	 */
-	public boolean showInBinaryContainer() {
-		return showInBinaryContainer(fBinaryFile);
-	}
-}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IBinary.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IBinary.java
index feb502bb3b..43696c65d4 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IBinary.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IBinary.java
@@ -49,12 +49,4 @@ public interface IBinary extends ICElement, IParent, IOpenable {
 
 	public boolean isLittleEndian();
 
-	/**
-	 * Determines whether this binary is part of the binary container. The binary container collects
-	 * binaries from a project. This is typically used to presents the executables of a project under
-	 * a common node in the CView or ProjectNavigator.
-	 */
-	public boolean showInBinaryContainer();
-	//public IAddressFactory getAddressFactory();
-
 }
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ICProject.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ICProject.java
index 2123e8e100..02e15f2e62 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ICProject.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ICProject.java
@@ -55,6 +55,10 @@ public interface ICProject extends IParent, IOpenable, ICElement {
 	 */
 	IBinaryContainer getBinaryContainer() throws CModelException;
 
+	IIncludeReferenceContainer getIncludeReferenceContainer() throws CModelException;
+
+	ILibraryReferenceContainer getLibraryReferenceContainer() throws CModelException;
+
 	/**
 	 * Returns the source root folders of the project.
 	 *
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IIncludeReferenceContainer.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IIncludeReferenceContainer.java
new file mode 100644
index 0000000000..a2321e88cc
--- /dev/null
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/IIncludeReferenceContainer.java
@@ -0,0 +1,22 @@
+/********************************************************************************
+ * Copyright (c) 2024 徐持恒 Xu Chiheng
+ *
+ * This program and the accompanying materials are made available under the
+ * terms of the Eclipse Public License 2.0 which is available at
+ * http://www.eclipse.org/legal/epl-2.0.
+ *
+ * SPDX-License-Identifier: EPL-2.0
+ ********************************************************************************/
+package org.eclipse.cdt.core.model;
+
+/**
+ * Represents a container of all the IIncludeReference's found in the project
+ * while inspecting the project.
+ *
+ * @noextend This interface is not intended to be extended by clients.
+ * @noimplement This interface is not intended to be implemented by clients.
+ */
+public interface IIncludeReferenceContainer extends ICElement, IParent, IOpenable {
+
+	public IIncludeReference[] getIncludeReferences() throws CModelException;
+}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ILibraryReferenceContainer.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ILibraryReferenceContainer.java
new file mode 100644
index 0000000000..bd037c9bda
--- /dev/null
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/core/model/ILibraryReferenceContainer.java
@@ -0,0 +1,22 @@
+/********************************************************************************
+ * Copyright (c) 2024 徐持恒 Xu Chiheng
+ *
+ * This program and the accompanying materials are made available under the
+ * terms of the Eclipse Public License 2.0 which is available at
+ * http://www.eclipse.org/legal/epl-2.0.
+ *
+ * SPDX-License-Identifier: EPL-2.0
+ ********************************************************************************/
+package org.eclipse.cdt.core.model;
+
+/**
+ * Represents a container of all the ILibraryReference's found in the project
+ * while inspecting the project.
+ *
+ * @noextend This interface is not intended to be extended by clients.
+ * @noimplement This interface is not intended to be implemented by clients.
+ */
+public interface ILibraryReferenceContainer extends ICElement, IParent, IOpenable {
+
+	public ILibraryReference[] getLibraryReferences() throws CModelException;
+}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/Binary.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/Binary.java
index 4bd564eeca..3916e05376 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/Binary.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/Binary.java
@@ -20,6 +20,7 @@ import java.io.BufferedReader;
 import java.io.File;
 import java.io.IOException;
 import java.io.InputStreamReader;
+import java.util.Arrays;
 import java.util.HashMap;
 import java.util.Map;
 
@@ -32,7 +33,6 @@ import org.eclipse.cdt.core.IBinaryParser.IBinaryShared;
 import org.eclipse.cdt.core.IBinaryParser.ISymbol;
 import org.eclipse.cdt.core.ISourceFinder;
 import org.eclipse.cdt.core.ISymbolReader;
-import org.eclipse.cdt.core.model.BinaryFilePresentation;
 import org.eclipse.cdt.core.model.CModelException;
 import org.eclipse.cdt.core.model.CoreModel;
 import org.eclipse.cdt.core.model.IBinary;
@@ -65,26 +65,15 @@ public class Binary extends Openable implements IBinary {
 	private long fLastModification;
 
 	private IBinaryObject binaryObject;
-	private boolean showInBinaryContainer;
 
 	public Binary(ICElement parent, IFile file, IBinaryObject bin) {
 		super(parent, file, ICElement.C_BINARY);
 		binaryObject = bin;
-		showInBinaryContainer = determineShowInBinaryContainer(bin);
-	}
-
-	private boolean determineShowInBinaryContainer(IBinaryObject bin) {
-		BinaryFilePresentation presentation = bin.getAdapter(BinaryFilePresentation.class);
-		if (presentation != null) {
-			return presentation.showInBinaryContainer();
-		}
-		return BinaryFilePresentation.showInBinaryContainer(bin);
 	}
 
 	public Binary(ICElement parent, IPath path, IBinaryObject bin) {
 		super(parent, path, ICElement.C_BINARY);
 		binaryObject = bin;
-		showInBinaryContainer = determineShowInBinaryContainer(bin);
 	}
 
 	@Override
@@ -316,10 +305,17 @@ public class Binary extends Openable implements IBinary {
 		}
 
 		if (sourceFiles != null && sourceFiles.length > 0) {
+			Arrays.sort(sourceFiles);
 			ISourceFinder srcFinder = getAdapter(ISourceFinder.class);
 			try {
 				for (String filename : sourceFiles) {
 
+					//filter out non-existent files
+					IPath path = Path.fromOSString(filename);
+					if (!path.toFile().exists()) {
+						continue;
+					}
+
 					// Find the file locally
 					if (srcFinder != null) {
 						String localPath = srcFinder.toLocalPath(filename);
@@ -528,11 +524,6 @@ public class Binary extends Openable implements IBinary {
 		super.closing(info);
 	}
 
-	@Override
-	public boolean showInBinaryContainer() {
-		return showInBinaryContainer;
-	}
-
 	@Override
 	public ICElement getHandleFromMemento(String token, MementoTokenizer memento) {
 		return null;
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/BinaryContainer.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/BinaryContainer.java
index f4f14abba0..2113b21ee7 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/BinaryContainer.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/BinaryContainer.java
@@ -49,7 +49,7 @@ public class BinaryContainer extends Openable implements IBinaryContainer {
 		for (ICElement element : e) {
 			if (element instanceof IBinary) {
 				IBinary bin = (IBinary) element;
-				if (bin.showInBinaryContainer()) {
+				if (true) {
 					list.add(bin);
 				}
 			}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CContainer.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CContainer.java
index d2eb704fd4..43954cd49a 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CContainer.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CContainer.java
@@ -225,7 +225,7 @@ public class CContainer extends Openable implements ICContainer {
 					} else {
 						final Binary binElement = new Binary(this, file, (IBinaryObject) bin);
 						celement = binElement;
-						if (binElement.showInBinaryContainer()) {
+						if (true) {
 							BinaryContainer vbin = (BinaryContainer) cproject.getBinaryContainer();
 							vbin.addChild(celement);
 						}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProject.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProject.java
index 102c888304..774fb35a09 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProject.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProject.java
@@ -41,8 +41,10 @@ import org.eclipse.cdt.core.model.ICModelStatusConstants;
 import org.eclipse.cdt.core.model.ICProject;
 import org.eclipse.cdt.core.model.IIncludeEntry;
 import org.eclipse.cdt.core.model.IIncludeReference;
+import org.eclipse.cdt.core.model.IIncludeReferenceContainer;
 import org.eclipse.cdt.core.model.ILibraryEntry;
 import org.eclipse.cdt.core.model.ILibraryReference;
+import org.eclipse.cdt.core.model.ILibraryReferenceContainer;
 import org.eclipse.cdt.core.model.IOutputEntry;
 import org.eclipse.cdt.core.model.IPathEntry;
 import org.eclipse.cdt.core.model.ISourceEntry;
@@ -84,6 +86,16 @@ public class CProject extends Openable implements ICProject {
 		return ((CProjectInfo) getElementInfo()).getArchiveContainer();
 	}
 
+	@Override
+	public IIncludeReferenceContainer getIncludeReferenceContainer() throws CModelException {
+		return ((CProjectInfo) getElementInfo()).getIncludeReferenceContainer();
+	}
+
+	@Override
+	public ILibraryReferenceContainer getLibraryReferenceContainer() throws CModelException {
+		return ((CProjectInfo) getElementInfo()).getLibraryReferenceContainer();
+	}
+
 	@Override
 	public IProject getProject() {
 		return getUnderlyingResource().getProject();
@@ -165,9 +177,6 @@ public class CProject extends Openable implements ICProject {
 	public IIncludeReference[] getIncludeReferences() throws CModelException {
 		CProjectInfo pinfo = (CProjectInfo) CModelManager.getDefault().peekAtInfo(this);
 		IIncludeReference[] incRefs = null;
-		if (pinfo != null) {
-			incRefs = pinfo.incReferences;
-		}
 		if (incRefs == null) {
 			IPathEntry[] entries = getResolvedPathEntries();
 			ArrayList<IncludeReference> list = new ArrayList<>(entries.length);
@@ -178,9 +187,6 @@ public class CProject extends Openable implements ICProject {
 				}
 			}
 			incRefs = list.toArray(new IIncludeReference[list.size()]);
-			if (pinfo != null) {
-				pinfo.incReferences = incRefs;
-			}
 		}
 		return incRefs;
 	}
@@ -189,9 +195,6 @@ public class CProject extends Openable implements ICProject {
 	public ILibraryReference[] getLibraryReferences() throws CModelException {
 		CProjectInfo pinfo = (CProjectInfo) CModelManager.getDefault().peekAtInfo(this);
 		ILibraryReference[] libRefs = null;
-		if (pinfo != null) {
-			libRefs = pinfo.libReferences;
-		}
 
 		if (libRefs == null) {
 			BinaryParserConfig[] binConfigs = CModelManager.getDefault().getBinaryParser(getProject());
@@ -207,9 +210,6 @@ public class CProject extends Openable implements ICProject {
 				}
 			}
 			libRefs = list.toArray(new ILibraryReference[list.size()]);
-			if (pinfo != null) {
-				pinfo.libReferences = libRefs;
-			}
 		}
 		return libRefs;
 	}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProjectInfo.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProjectInfo.java
index 81e121da42..636c6f10e7 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProjectInfo.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/CProjectInfo.java
@@ -23,7 +23,9 @@ import org.eclipse.cdt.core.model.IArchiveContainer;
 import org.eclipse.cdt.core.model.IBinaryContainer;
 import org.eclipse.cdt.core.model.ICProject;
 import org.eclipse.cdt.core.model.IIncludeReference;
+import org.eclipse.cdt.core.model.IIncludeReferenceContainer;
 import org.eclipse.cdt.core.model.ILibraryReference;
+import org.eclipse.cdt.core.model.ILibraryReferenceContainer;
 import org.eclipse.cdt.core.model.IOutputEntry;
 import org.eclipse.cdt.core.model.ISourceRoot;
 import org.eclipse.core.resources.IContainer;
@@ -39,8 +41,8 @@ class CProjectInfo extends OpenableInfo {
 
 	BinaryContainer vBin;
 	ArchiveContainer vLib;
-	ILibraryReference[] libReferences;
-	IIncludeReference[] incReferences;
+	IIncludeReferenceContainer includeReferenceContainer;
+	ILibraryReferenceContainer libraryReferenceContainer;
 	ISourceRoot[] sourceRoots;
 	IOutputEntry[] outputEntries;
 
@@ -68,6 +70,20 @@ class CProjectInfo extends OpenableInfo {
 		return vLib;
 	}
 
+	synchronized public IIncludeReferenceContainer getIncludeReferenceContainer() {
+		if (includeReferenceContainer == null) {
+			includeReferenceContainer = new IncludeReferenceContainer((CProject) getElement());
+		}
+		return includeReferenceContainer;
+	}
+
+	synchronized public ILibraryReferenceContainer getLibraryReferenceContainer() {
+		if (libraryReferenceContainer == null) {
+			libraryReferenceContainer = new LibraryReferenceContainer((CProject) getElement());
+		}
+		return libraryReferenceContainer;
+	}
+
 	public Object[] getNonCResources(IResource res) {
 		if (nonCResources != null)
 			return nonCResources;
@@ -137,24 +153,6 @@ class CProjectInfo extends OpenableInfo {
 	 * Reset the source roots and other caches
 	 */
 	public void resetCaches() {
-		if (libReferences != null) {
-			for (ILibraryReference libReference : libReferences) {
-				try {
-					((CElement) libReference).close();
-				} catch (CModelException e) {
-					//
-				}
-			}
-		}
-		if (incReferences != null) {
-			for (IIncludeReference incReference : incReferences) {
-				try {
-					((CElement) incReference).close();
-				} catch (CModelException e) {
-					//
-				}
-			}
-		}
 		sourceRoots = null;
 		outputEntries = null;
 		setNonCResources(null);
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/DeltaProcessor.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/DeltaProcessor.java
index 118f9d8033..0468cdbe68 100644
--- a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/DeltaProcessor.java
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/DeltaProcessor.java
@@ -89,57 +89,6 @@ final class DeltaProcessor {
 
 		ICElement celement = manager.create(resource, null);
 
-		// BUG 36424:
-		// The Binary may only be visible in the BinaryContainers
-		try {
-			if (celement == null && resource.getType() == IResource.FILE) {
-				ICElement[] children;
-				ICProject cproj = manager.create(resource.getProject());
-				if (cproj != null && cproj.isOpen()) {
-					IBinaryContainer bin = cproj.getBinaryContainer();
-					if (bin.isOpen()) {
-						children = ((CElement) bin).getElementInfo().getChildren();
-						for (ICElement element : children) {
-							IResource res = element.getResource();
-							if (resource.equals(res)) {
-								celement = element;
-								break;
-							}
-						}
-					}
-				}
-			}
-			// BUG 36424:
-			// The Archive may only be visible in the ArchiveContainers
-			if (celement == null && resource.getType() == IResource.FILE) {
-				ICElement[] children;
-				ICProject cproj = manager.create(resource.getProject());
-				if (cproj != null && cproj.isOpen()) {
-					IArchiveContainer ar = cproj.getArchiveContainer();
-					if (ar.isOpen()) {
-						children = ((CElement) ar).getElementInfo().getChildren();
-						for (ICElement element : children) {
-							IResource res = element.getResource();
-							if (resource.equals(res)) {
-								celement = element;
-								break;
-							}
-						}
-					}
-				}
-			}
-			//  It is not a C resource if the parent is a Binary/ArchiveContainer
-			// But we have to release too.
-			if (celement != null && resource.getType() == IResource.FILE) {
-				ICElement parent = celement.getParent();
-				if (parent instanceof IArchiveContainer || parent instanceof IBinaryContainer) {
-					releaseCElement(celement);
-					celement = null;
-				}
-			}
-		} catch (CModelException e) {
-			return null;
-		}
 		return celement;
 	}
 
@@ -585,7 +534,7 @@ final class DeltaProcessor {
 				} else if (element instanceof ICProject) {
 					return ((ICProject) element).isOpen();
 				} else if (element instanceof IBinary) {
-					if (((IBinary) element).showInBinaryContainer()) {
+					if (true) {
 						ICProject cProject = element.getCProject();
 						IBinaryContainer bin = cProject.getBinaryContainer();
 						fCurrentDelta.changed(bin, ICElementDelta.F_CONTENT);
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainer.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainer.java
new file mode 100644
index 0000000000..9ed86bf734
--- /dev/null
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainer.java
@@ -0,0 +1,78 @@
+/********************************************************************************
+ * Copyright (c) 2024 徐持恒 Xu Chiheng
+ *
+ * This program and the accompanying materials are made available under the
+ * terms of the Eclipse Public License 2.0 which is available at
+ * http://www.eclipse.org/legal/epl-2.0.
+ *
+ * SPDX-License-Identifier: EPL-2.0
+ ********************************************************************************/
+package org.eclipse.cdt.internal.core.model;
+
+import java.util.Map;
+
+import org.eclipse.cdt.core.CCorePlugin;
+import org.eclipse.cdt.core.model.CModelException;
+import org.eclipse.cdt.core.model.ICElement;
+import org.eclipse.cdt.core.model.ICProject;
+import org.eclipse.cdt.core.model.IIncludeReference;
+import org.eclipse.cdt.core.model.IIncludeReferenceContainer;
+import org.eclipse.cdt.internal.core.util.MementoTokenizer;
+import org.eclipse.core.resources.IResource;
+import org.eclipse.core.runtime.Assert;
+import org.eclipse.core.runtime.IProgressMonitor;
+
+public class IncludeReferenceContainer extends Openable implements IIncludeReferenceContainer {
+
+	public IncludeReferenceContainer(CProject cProject) {
+		super(cProject, null, CCorePlugin.getResourceString("CoreModel.IncludeReferenceContainer.Includes"), //$NON-NLS-1$
+				ICElement.C_VCONTAINER);
+	}
+
+	@Override
+	public IIncludeReference[] getIncludeReferences() throws CModelException {
+		return ((ICProject) getParent()).getIncludeReferences();
+	}
+
+	@Override
+	public CElementInfo getElementInfo(IProgressMonitor monitor) throws CModelException {
+		CModelManager manager = CModelManager.getDefault();
+		synchronized (manager) {
+			CElementInfo info = (CElementInfo) manager.getInfo(this);
+			if (info != null) {
+				return info;
+			}
+			info = createElementInfo();
+			openWhenClosed(info, monitor);
+			return info;
+		}
+	}
+
+	@Override
+	public CElementInfo createElementInfo() {
+		return new IncludeReferenceContainerInfo(this);
+	}
+
+	@Override
+	protected boolean buildStructure(OpenableInfo info, IProgressMonitor pm, Map<ICElement, CElementInfo> newElements,
+			IResource underlyingResource) throws CModelException {
+		return true;
+	}
+
+	@Override
+	public ICElement getHandleFromMemento(String token, MementoTokenizer memento) {
+		return null;
+	}
+
+	@Override
+	public String getHandleMemento() {
+		return null;
+	}
+
+	@Override
+	protected char getHandleMementoDelimiter() {
+		Assert.isTrue(false, "Should not be called"); //$NON-NLS-1$
+		return 0;
+	}
+
+}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainerInfo.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainerInfo.java
new file mode 100644
index 0000000000..1d8f1fb9e1
--- /dev/null
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/IncludeReferenceContainerInfo.java
@@ -0,0 +1,30 @@
+/********************************************************************************
+ * Copyright (c) 2024 徐持恒 Xu Chiheng
+ *
+ * This program and the accompanying materials are made available under the
+ * terms of the Eclipse Public License 2.0 which is available at
+ * http://www.eclipse.org/legal/epl-2.0.
+ *
+ * SPDX-License-Identifier: EPL-2.0
+ ********************************************************************************/
+
+package org.eclipse.cdt.internal.core.model;
+
+import org.eclipse.cdt.core.model.ICElement;
+
+/**
+ */
+public class IncludeReferenceContainerInfo extends OpenableInfo {
+
+	/**
+	 * Constructs a new C Model Info
+	 */
+	protected IncludeReferenceContainerInfo(CElement element) {
+		super(element);
+	}
+
+	@Override
+	protected void addChild(ICElement child) {
+		addChildIfAbsent(child);
+	}
+}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainer.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainer.java
new file mode 100644
index 0000000000..8858c607c3
--- /dev/null
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainer.java
@@ -0,0 +1,78 @@
+/********************************************************************************
+ * Copyright (c) 2024 徐持恒 Xu Chiheng
+ *
+ * This program and the accompanying materials are made available under the
+ * terms of the Eclipse Public License 2.0 which is available at
+ * http://www.eclipse.org/legal/epl-2.0.
+ *
+ * SPDX-License-Identifier: EPL-2.0
+ ********************************************************************************/
+package org.eclipse.cdt.internal.core.model;
+
+import java.util.Map;
+
+import org.eclipse.cdt.core.CCorePlugin;
+import org.eclipse.cdt.core.model.CModelException;
+import org.eclipse.cdt.core.model.ICElement;
+import org.eclipse.cdt.core.model.ICProject;
+import org.eclipse.cdt.core.model.ILibraryReference;
+import org.eclipse.cdt.core.model.ILibraryReferenceContainer;
+import org.eclipse.cdt.internal.core.util.MementoTokenizer;
+import org.eclipse.core.resources.IResource;
+import org.eclipse.core.runtime.Assert;
+import org.eclipse.core.runtime.IProgressMonitor;
+
+public class LibraryReferenceContainer extends Openable implements ILibraryReferenceContainer {
+
+	public LibraryReferenceContainer(CProject cProject) {
+		super(cProject, null, CCorePlugin.getResourceString("CoreModel.LibraryReferenceContainer.Libraries"), //$NON-NLS-1$
+				ICElement.C_VCONTAINER);
+	}
+
+	@Override
+	public ILibraryReference[] getLibraryReferences() throws CModelException {
+		return ((ICProject) getParent()).getLibraryReferences();
+	}
+
+	@Override
+	public CElementInfo getElementInfo(IProgressMonitor monitor) throws CModelException {
+		CModelManager manager = CModelManager.getDefault();
+		synchronized (manager) {
+			CElementInfo info = (CElementInfo) manager.getInfo(this);
+			if (info != null) {
+				return info;
+			}
+			info = createElementInfo();
+			openWhenClosed(info, monitor);
+			return info;
+		}
+	}
+
+	@Override
+	public CElementInfo createElementInfo() {
+		return new LibraryReferenceContainerInfo(this);
+	}
+
+	@Override
+	protected boolean buildStructure(OpenableInfo info, IProgressMonitor pm, Map<ICElement, CElementInfo> newElements,
+			IResource underlyingResource) throws CModelException {
+		return true;
+	}
+
+	@Override
+	public ICElement getHandleFromMemento(String token, MementoTokenizer memento) {
+		return null;
+	}
+
+	@Override
+	public String getHandleMemento() {
+		return null;
+	}
+
+	@Override
+	protected char getHandleMementoDelimiter() {
+		Assert.isTrue(false, "Should not be called"); //$NON-NLS-1$
+		return 0;
+	}
+
+}
diff --git a/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainerInfo.java b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainerInfo.java
new file mode 100644
index 0000000000..9eb70bd1e3
--- /dev/null
+++ b/core/org.eclipse.cdt.core/model/org/eclipse/cdt/internal/core/model/LibraryReferenceContainerInfo.java
@@ -0,0 +1,30 @@
+/********************************************************************************
+ * Copyright (c) 2024 徐持恒 Xu Chiheng
+ *
+ * This program and the accompanying materials are made available under the
+ * terms of the Eclipse Public License 2.0 which is available at
+ * http://www.eclipse.org/legal/epl-2.0.
+ *
+ * SPDX-License-Identifier: EPL-2.0
+ ********************************************************************************/
+
+package org.eclipse.cdt.internal.core.model;
+
+import org.eclipse.cdt.core.model.ICElement;
+
+/**
+ */
+public class LibraryReferenceContainerInfo extends OpenableInfo {
+
+	/**
+	 * Constructs a new C Model Info
+	 */
+	protected LibraryReferenceContainerInfo(CElement element) {
+		super(element);
+	}
+
+	@Override
+	protected void addChild(ICElement child) {
+		addChildIfAbsent(child);
+	}
+}
diff --git a/core/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/pdom/indexer/TranslationUnitCollector.java b/core/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/pdom/indexer/TranslationUnitCollector.java
index 43d41175ea..d88045b6ee 100644
--- a/core/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/pdom/indexer/TranslationUnitCollector.java
+++ b/core/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/pdom/indexer/TranslationUnitCollector.java
@@ -49,6 +49,8 @@ final public class TranslationUnitCollector implements ICElementVisitor {
 			return false;
 		case ICElement.C_CCONTAINER:
 		case ICElement.C_PROJECT:
+		//For imported C/C++ executable
+		case ICElement.C_BINARY:
 			return true;
 		}
 		return false;
diff --git a/core/org.eclipse.cdt.core/src/org/eclipse/cdt/internal/core/CCorePluginResources.properties b/core/org.eclipse.cdt.core/src/org/eclipse/cdt/internal/core/CCorePluginResources.properties
index 1553b17174..57b60facea 100644
--- a/core/org.eclipse.cdt.core/src/org/eclipse/cdt/internal/core/CCorePluginResources.properties
+++ b/core/org.eclipse.cdt.core/src/org/eclipse/cdt/internal/core/CCorePluginResources.properties
@@ -22,6 +22,8 @@ CoreModel.CModelBuilder.Parser_Construction_Failure=Parser/Scanner construction
 CoreModel.CModelBuilder.Parse_Failure=Parse failure
 CoreModel.ArchiveContainer.Archives=Archives
 CoreModel.BinaryContainer.Binaries=Binaries
+CoreModel.IncludeReferenceContainer.Includes=Includes
+CoreModel.LibraryReferenceContainer.Libraries=Libraries
 CoreModel.CModelStatus.Error_in_CPlugin=Error in C Plugin
 CoreModel.NullBinaryParser.Not_binary_file=not a binary file
 CoreModel.NullBinaryParser.Null_Format=Null Format
diff --git a/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/coff/parser/PEParser64.java b/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/coff/parser/PEParser64.java
index 56ecb87174..409c8908f6 100644
--- a/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/coff/parser/PEParser64.java
+++ b/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/coff/parser/PEParser64.java
@@ -95,6 +95,16 @@ public class PEParser64 extends AbstractCExtension implements IBinaryParser {
 
 	@Override
 	public boolean isBinary(byte[] array, IPath path) {
+		String baseName = path.lastSegment();
+		if (baseName.endsWith(".o") //$NON-NLS-1$
+				|| baseName.endsWith(".obj") //$NON-NLS-1$
+				|| baseName.endsWith(".a") //$NON-NLS-1$
+				|| baseName.endsWith(".lib") //$NON-NLS-1$
+				|| baseName.endsWith(".exe") //$NON-NLS-1$
+				|| baseName.endsWith(".dll") //$NON-NLS-1$
+				) {
+			return true;
+		}
 		boolean isBin = PE64.isExeHeader(array) || AR.isARHeader(array);
 		// It maybe an object file try the known machine types.
 		if (!isBin && array.length > 1) {
diff --git a/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/debug/dwarf/DwarfReader.java b/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/debug/dwarf/DwarfReader.java
index 24c4e7c6c0..c4f8a622f6 100644
--- a/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/debug/dwarf/DwarfReader.java
+++ b/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/debug/dwarf/DwarfReader.java
@@ -28,8 +28,10 @@ import java.util.HashSet;
 import java.util.List;
 import java.util.Map;
 import java.util.Set;
+import java.util.TreeSet;
 
 import org.eclipse.cdt.core.CCorePlugin;
+import org.eclipse.cdt.core.Cygwin;
 import org.eclipse.cdt.core.ICompileOptionsFinder;
 import org.eclipse.cdt.core.ISymbolReader;
 import org.eclipse.cdt.utils.coff.Coff64.SectionHeader;
@@ -40,6 +42,7 @@ import org.eclipse.cdt.utils.elf.Elf.Section;
 import org.eclipse.core.runtime.IPath;
 import org.eclipse.core.runtime.IProgressMonitor;
 import org.eclipse.core.runtime.Path;
+import org.eclipse.core.runtime.Platform;
 
 /**
  * Light-weight parser of Dwarf2 data which is intended for getting only
@@ -54,7 +57,8 @@ public class DwarfReader extends Dwarf implements ISymbolReader, ICompileOptions
 
 	final static String[] DWARF_ALT_SectionsToParse = { DWARF_DEBUG_STR, DWARF_DEBUG_MACRO };
 
-	private final Collection<String> m_fileCollection = new HashSet<>();
+	// use TreeSet instead of HashSet to make the collection sorted by file names
+	private final Collection<String> m_fileCollection = new TreeSet<>();
 	private final Map<Long, String> m_stmtFileMap = new HashMap<>();
 	private final Map<String, ArrayList<String>> m_compileOptionsMap = new HashMap<>();
 	private String[] m_fileNames = null;
@@ -695,6 +699,11 @@ public class DwarfReader extends Dwarf implements ISymbolReader, ICompileOptions
 		// This convert the path to canonical path (but not necessarily absolute, which
 		// is different from java.io.File.getCanonicalPath()).
 		fullName = pa.toString();
+		if (Platform.getOS().equals(Platform.OS_WIN32)) {
+			if (fullName.startsWith("/")) { //$NON-NLS-1$
+				fullName = Cygwin.pathToWindows(fullName);
+			}
+		}
 
 		if (!m_fileCollection.contains(fullName))
 			m_fileCollection.add(fullName);
diff --git a/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/elf/parser/ElfParser.java b/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/elf/parser/ElfParser.java
index c6c594303e..9e8f7fd6c6 100644
--- a/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/elf/parser/ElfParser.java
+++ b/core/org.eclipse.cdt.core/utils/org/eclipse/cdt/utils/elf/parser/ElfParser.java
@@ -98,6 +98,15 @@ public class ElfParser extends AbstractCExtension implements IBinaryParser {
 
 	@Override
 	public boolean isBinary(byte[] array, IPath path) {
+		String baseName = path.lastSegment();
+		if (baseName.endsWith(".o") //$NON-NLS-1$
+				|| baseName.endsWith(".obj") //$NON-NLS-1$
+				|| baseName.endsWith(".a") //$NON-NLS-1$
+				|| baseName.endsWith(".lib") //$NON-NLS-1$
+				|| baseName.endsWith(".so") //$NON-NLS-1$
+				) {
+			return true;
+		}
 		return Elf.isElfHeader(array) || AR.isARHeader(array);
 	}
 
diff --git a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/BaseCElementContentProvider.java b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/BaseCElementContentProvider.java
index c088f2bfec..9ab73a02b0 100644
--- a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/BaseCElementContentProvider.java
+++ b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/BaseCElementContentProvider.java
@@ -367,7 +367,7 @@ public class BaseCElementContentProvider implements ITreeContentProvider {
 		return internalGetParent(element);
 	}
 
-	public Object internalGetParent(Object element) {
+	protected Object internalGetParent(Object element) {
 		if (element instanceof IResource) {
 			IResource parent = ((IResource) element).getParent();
 			if (parent != null && parent.isAccessible()) {
@@ -726,14 +726,6 @@ public class BaseCElementContentProvider implements ITreeContentProvider {
 	}
 
 	private Object[] filterNonCResources(Object[] objects, ICProject cproject) throws CModelException {
-		ICElement[] binaries = null;
-		ICElement[] archives = null;
-		try {
-			binaries = getBinaries(cproject);
-			archives = getArchives(cproject);
-		} catch (CModelException e) {
-			archives = binaries = ICElement.EMPTY_ARRAY;
-		}
 		ISourceRoot[] roots = null;
 		try {
 			roots = cproject.getSourceRoots();
@@ -767,24 +759,7 @@ public class BaseCElementContentProvider implements ITreeContentProvider {
 						o = root;
 				}
 			} else if (o instanceof IFile) {
-				boolean found = false;
-				for (ICElement binarie : binaries) {
-					IResource res = binarie.getResource();
-					if (o.equals(res)) {
-						o = binarie;
-						found = true;
-						break;
-					}
-				}
-				if (!found) {
-					for (ICElement archive : archives) {
-						IResource res = archive.getResource();
-						if (o.equals(res)) {
-							o = archive;
-							break;
-						}
-					}
-				}
+
 			}
 			nonCResources.add(o);
 		}
@@ -812,44 +787,6 @@ public class BaseCElementContentProvider implements ITreeContentProvider {
 		return true;
 	}
 
-	protected IBinary[] getBinaries(ICProject cproject) throws CModelException {
-		IBinaryContainer container = cproject.getBinaryContainer();
-		return getBinaries(container);
-	}
-
-	protected IBinary[] getBinaries(IBinaryContainer container) throws CModelException {
-		ICElement[] celements = container.getChildren();
-		ArrayList<IBinary> list = new ArrayList<>(celements.length);
-		for (ICElement celement : celements) {
-			if (celement instanceof IBinary) {
-				IBinary bin = (IBinary) celement;
-				list.add(bin);
-			}
-		}
-		IBinary[] bins = new IBinary[list.size()];
-		list.toArray(bins);
-		return bins;
-	}
-
-	protected IArchive[] getArchives(ICProject cproject) throws CModelException {
-		IArchiveContainer container = cproject.getArchiveContainer();
-		return getArchives(container);
-	}
-
-	protected IArchive[] getArchives(IArchiveContainer container) throws CModelException {
-		ICElement[] celements = container.getChildren();
-		ArrayList<IArchive> list = new ArrayList<>(celements.length);
-		for (ICElement celement : celements) {
-			if (celement instanceof IArchive) {
-				IArchive ar = (IArchive) celement;
-				list.add(ar);
-			}
-		}
-		IArchive[] ars = new IArchive[list.size()];
-		list.toArray(ars);
-		return ars;
-	}
-
 	/**
 	 * Note: This method is for internal use only. Clients should not call this method.
 	 */
diff --git a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/cview/CViewContentProvider.java b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/cview/CViewContentProvider.java
index 0e58a5bf1c..270a87b40f 100644
--- a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/cview/CViewContentProvider.java
+++ b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/cview/CViewContentProvider.java
@@ -14,43 +14,32 @@
 
 package org.eclipse.cdt.internal.ui.cview;
 
-import java.util.ArrayList;
-
 import org.eclipse.cdt.core.model.CModelException;
 import org.eclipse.cdt.core.model.IArchive;
 import org.eclipse.cdt.core.model.IArchiveContainer;
 import org.eclipse.cdt.core.model.IBinary;
 import org.eclipse.cdt.core.model.IBinaryContainer;
-import org.eclipse.cdt.core.model.ICElement;
 import org.eclipse.cdt.core.model.ICProject;
 import org.eclipse.cdt.core.model.IIncludeReference;
+import org.eclipse.cdt.core.model.IIncludeReferenceContainer;
 import org.eclipse.cdt.core.model.ILibraryReference;
-import org.eclipse.cdt.internal.ui.util.RemoteTreeContentManager;
-import org.eclipse.cdt.internal.ui.util.RemoteTreeViewer;
+import org.eclipse.cdt.core.model.ILibraryReferenceContainer;
 import org.eclipse.cdt.ui.CElementContentProvider;
 import org.eclipse.core.resources.IContainer;
-import org.eclipse.core.resources.ResourcesPlugin;
 import org.eclipse.core.runtime.IPath;
 import org.eclipse.jface.viewers.TreeViewer;
-import org.eclipse.jface.viewers.Viewer;
 import org.eclipse.ui.IWorkbenchPartSite;
 
 /**
  * CViewContentProvider
  */
 public class CViewContentProvider extends CElementContentProvider {
-	private RemoteTreeContentManager fManager;
-
 	public CViewContentProvider() {
 		super();
 	}
 
-	/**
-	 *
-	 */
 	public CViewContentProvider(TreeViewer viewer, IWorkbenchPartSite site) {
 		super();
-		fManager = createContentManager(viewer, site);
 	}
 
 	/**
@@ -60,14 +49,6 @@ public class CViewContentProvider extends CElementContentProvider {
 	public CViewContentProvider(TreeViewer viewer, IWorkbenchPartSite site, boolean provideMembers,
 			boolean provideWorkingCopy) {
 		super(provideMembers, provideWorkingCopy);
-		fManager = createContentManager(viewer, site);
-	}
-
-	protected RemoteTreeContentManager createContentManager(TreeViewer viewer, IWorkbenchPartSite site) {
-		if (site == null) {
-			return new RemoteTreeContentManager(this, (RemoteTreeViewer) viewer, null);
-		}
-		return new RemoteTreeContentManager(this, (RemoteTreeViewer) viewer, site);
 	}
 
 	/* (non-Javadoc)
@@ -75,30 +56,34 @@ public class CViewContentProvider extends CElementContentProvider {
 	 */
 	@Override
 	public Object[] getChildren(Object element) {
-		Object[] objs = null;
-
-		if (fManager != null) {
-			// use the the deferred manager for some cases
-			if (element instanceof IBinary) {
-				// It takes sometimes to parse binaries deferred it
-				objs = fManager.getChildren(element);
-			} else if (element instanceof IArchive) {
-				// It takes sometimes to parse archives deferred it
-				objs = fManager.getChildren(element);
-			}
-		}
-
-		if (objs == null) {
-			objs = super.getChildren(element);
-		}
+		Object[] objs = super.getChildren(element);
 		Object[] extras = null;
 		try {
 			if (element instanceof ICProject) {
-				extras = getProjectChildren((ICProject) element);
+				ICProject cproject = (ICProject) element;
+				IArchiveContainer archive = cproject.getArchiveContainer();
+				IBinaryContainer bin = cproject.getBinaryContainer();
+				LibraryRefContainer libRefCont = new LibraryRefContainer(cproject);
+				IncludeRefContainer incRefCont = new IncludeRefContainer(cproject);
+				// ILibraryReferenceContainer libRefCont = cproject.getLibraryReferenceContainer();
+				// IIncludeReferenceContainer incRefCont = cproject.getIncludeReferenceContainer();
+				extras = new Object[] { archive, bin, libRefCont, incRefCont };
 			} else if (element instanceof IBinaryContainer) {
-				extras = getExecutables((IBinaryContainer) element);
+				IBinaryContainer container = (IBinaryContainer) element;
+				IBinary[] celements = container.getBinaries();
+				extras = celements;
 			} else if (element instanceof IArchiveContainer) {
-				extras = getArchives((IArchiveContainer) element);
+				IArchiveContainer container = (IArchiveContainer) element;
+				IArchive[] celements = container.getArchives();
+				extras = celements;
+			} else if (element instanceof IIncludeReferenceContainer) {
+				IIncludeReferenceContainer container = (IIncludeReferenceContainer) element;
+				IIncludeReference[] celements = container.getIncludeReferences();
+				extras = celements;
+			} else if (element instanceof ILibraryReferenceContainer) {
+				ILibraryReferenceContainer container = (ILibraryReferenceContainer) element;
+				ILibraryReference[] celements = container.getLibraryReferences();
+				extras = celements;
 			} else if (element instanceof IIncludeReference) {
 				extras = getIncludeReferenceChildren((IIncludeReference) element);
 			}
@@ -115,6 +100,27 @@ public class CViewContentProvider extends CElementContentProvider {
 		return objs;
 	}
 
+	@Override
+	public boolean hasChildren(Object element) {
+		//@formatter:off
+		if (element instanceof ICProject
+			|| element instanceof IBinaryContainer
+			|| element instanceof IArchiveContainer
+			|| element instanceof IIncludeReferenceContainer
+			|| element instanceof ILibraryReferenceContainer
+			|| element instanceof IIncludeReference
+			|| element instanceof IBinary
+			|| element instanceof IArchive) {
+			return true;
+		}
+		return super.hasChildren(element);
+	}
+
+	@Override
+	public Object getParent(Object element) {
+		return super.getParent(element);
+	}
+
 	public Object[] getIncludeReferenceChildren(IIncludeReference ref) throws CModelException {
 		// We do not want to show children for Include paths that are inside the workspace.
 		// no need to that since they can access elsewhere and that simplifies the
@@ -129,66 +135,11 @@ public class CViewContentProvider extends CElementContentProvider {
 		return ref.getChildren();
 	}
 
-	private Object[] getProjectChildren(ICProject cproject) throws CModelException {
-		Object[] extras = null;
-		IArchiveContainer archive = cproject.getArchiveContainer();
-		if (getArchives(archive).length > 0) {
-			extras = new Object[] { archive };
-		}
-		IBinaryContainer bin = cproject.getBinaryContainer();
-		if (getExecutables(bin).length > 0) {
-			Object[] o = new Object[] { bin };
-			if (extras != null && extras.length > 0) {
-				extras = concatenate(extras, o);
-			} else {
-				extras = o;
-			}
-		}
-		LibraryRefContainer libRefCont = new LibraryRefContainer(cproject);
-		Object[] libRefs = libRefCont.getChildren(cproject);
-		if (libRefs != null && libRefs.length > 0) {
-			Object[] o = new Object[] { libRefCont };
-			if (extras != null && extras.length > 0) {
-				extras = concatenate(extras, o);
-			} else {
-				extras = o;
-			}
-		}
-
-		IncludeRefContainer incRefCont = new IncludeRefContainer(cproject);
-		Object[] incRefs = incRefCont.getChildren(cproject);
-		if (incRefs != null && incRefs.length > 0) {
-			Object[] o = new Object[] { incRefCont };
-			if (extras != null && extras.length > 0) {
-				extras = concatenate(extras, o);
-			} else {
-				extras = o;
-			}
-		}
-		return extras;
-	}
-
-	protected IBinary[] getExecutables(IBinaryContainer container) throws CModelException {
-		ICElement[] celements = container.getChildren();
-		ArrayList<IBinary> list = new ArrayList<>(celements.length);
-		for (int i = 0; i < celements.length; i++) {
-			if (celements[i] instanceof IBinary) {
-				IBinary bin = (IBinary) celements[i];
-				if (bin.showInBinaryContainer()) {
-					list.add(bin);
-				}
-			}
-		}
-		IBinary[] bins = new IBinary[list.size()];
-		list.toArray(bins);
-		return bins;
-	}
-
 	/* (non-Javadoc)
 	 * @see org.eclipse.cdt.internal.ui.BaseCElementContentProvider#internalGetParent(java.lang.Object)
 	 */
 	@Override
-	public Object internalGetParent(Object element) {
+	protected Object internalGetParent(Object element) {
 		// since we insert logical containers we have to fix
 		// up the parent for {IInclude,ILibrary}Reference so that they refer
 		// to the container and containers refere to the project
@@ -206,69 +157,4 @@ public class CViewContentProvider extends CElementContentProvider {
 		}
 		return parent;
 	}
-
-	/* (non-Javadoc)
-	 * @see org.eclipse.jface.viewers.ITreeContentProvider#hasChildren(java.lang.Object)
-	 */
-	@Override
-	public boolean hasChildren(Object element) {
-		if (fManager != null) {
-			if (element instanceof IBinary) {
-				return fManager.mayHaveChildren(element);
-			} else if (element instanceof IArchive) {
-				return fManager.mayHaveChildren(element);
-			}
-		}
-		if (element instanceof IBinaryContainer) {
-			try {
-				IBinaryContainer cont = (IBinaryContainer) element;
-				IBinary[] bins = getBinaries(cont);
-				return (bins != null) && bins.length > 0;
-			} catch (CModelException e) {
-				return false;
-			}
-		} else if (element instanceof IArchiveContainer) {
-			try {
-				IArchiveContainer cont = (IArchiveContainer) element;
-				IArchive[] ars = getArchives(cont);
-				return (ars != null) && ars.length > 0;
-			} catch (CModelException e) {
-				return false;
-			}
-		} else if (element instanceof IncludeReferenceProxy) {
-			IIncludeReference reference = ((IncludeReferenceProxy) element).getReference();
-			IContainer container = ResourcesPlugin.getWorkspace().getRoot()
-					.getContainerForLocation(reference.getPath());
-			if (container != null) {
-				// do not allow to navigate to workspace containers inside "Includes" node
-				return false;
-			}
-
-			return reference.hasChildren();
-		}
-		return super.hasChildren(element);
-	}
-
-	/* (non-Javadoc)
-	 * @see org.eclipse.jface.viewers.IContentProvider#dispose()
-	 */
-	@Override
-	public void dispose() {
-		if (fManager != null) {
-			fManager.cancel();
-		}
-		super.dispose();
-	}
-
-	/* (non-Javadoc)
-	 * @see org.eclipse.jface.viewers.IContentProvider#inputChanged(org.eclipse.jface.viewers.Viewer, java.lang.Object, java.lang.Object)
-	 */
-	@Override
-	public void inputChanged(Viewer viewer, Object oldInput, Object newInput) {
-		if (fManager != null) {
-			fManager.cancel();
-		}
-		super.inputChanged(viewer, oldInput, newInput);
-	}
-
 }
diff --git a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/viewsupport/CElementLabelComposer.java b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/viewsupport/CElementLabelComposer.java
index 555d85ab0f..17c9b1af36 100644
--- a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/viewsupport/CElementLabelComposer.java
+++ b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/viewsupport/CElementLabelComposer.java
@@ -38,6 +38,7 @@ import org.eclipse.cdt.core.model.ITypeDef;
 import org.eclipse.cdt.core.model.IVariableDeclaration;
 import org.eclipse.cdt.core.parser.ast.ASTAccessVisibility;
 import org.eclipse.cdt.internal.core.model.CoreModelMessages;
+import org.eclipse.cdt.internal.core.model.ExternalTranslationUnit;
 import org.eclipse.cdt.ui.CUIPlugin;
 import org.eclipse.cdt.ui.PreferenceConstants;
 import org.eclipse.core.resources.IProject;
@@ -886,6 +887,10 @@ public class CElementLabelComposer {
 				fBuffer.append(CElementLabels.CONCAT_STRING);
 				fBuffer.append(path.removeLastSegments(1).toString());
 			} else {
+				if (tu instanceof ExternalTranslationUnit) {
+					fBuffer.append(path.toString());
+					return;
+				}
 				fBuffer.append(path.lastSegment());
 			}
 		}
diff --git a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/ui/CElementContentProvider.java b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/ui/CElementContentProvider.java
index 6e567e6df8..8cac597621 100644
--- a/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/ui/CElementContentProvider.java
+++ b/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/ui/CElementContentProvider.java
@@ -283,7 +283,7 @@ public class CElementContentProvider extends BaseCElementContentProvider
 		ICProject cproject = null;
 		if (cfile instanceof IBinary) {
 			IBinary bin = (IBinary) cfile;
-			if (bin.showInBinaryContainer()) {
+			if (true) {
 				cproject = bin.getCProject();
 				container = cproject.getBinaryContainer();
 			}
diff --git a/debug/org.eclipse.cdt.debug.ui/src/org/eclipse/cdt/debug/ui/importexecutable/AbstractImportExecutableWizard.java b/debug/org.eclipse.cdt.debug.ui/src/org/eclipse/cdt/debug/ui/importexecutable/AbstractImportExecutableWizard.java
index 7aa49bf3cb..7f510e2eb8 100644
--- a/debug/org.eclipse.cdt.debug.ui/src/org/eclipse/cdt/debug/ui/importexecutable/AbstractImportExecutableWizard.java
+++ b/debug/org.eclipse.cdt.debug.ui/src/org/eclipse/cdt/debug/ui/importexecutable/AbstractImportExecutableWizard.java
@@ -33,6 +33,7 @@ import org.eclipse.core.runtime.IStatus;
 import org.eclipse.core.runtime.NullProgressMonitor;
 import org.eclipse.core.runtime.OperationCanceledException;
 import org.eclipse.core.runtime.Path;
+import org.eclipse.core.runtime.Platform;
 import org.eclipse.core.runtime.Status;
 import org.eclipse.debug.core.ILaunchConfigurationType;
 import org.eclipse.debug.core.ILaunchConfigurationWorkingCopy;
@@ -252,7 +253,14 @@ public abstract class AbstractImportExecutableWizard extends Wizard implements I
 		String defaultBinaryParserId = CCorePlugin.getDefault().getPluginPreferences()
 				.getDefaultString(CCorePlugin.PREF_BINARY_PARSER);
 		if (defaultBinaryParserId == null || defaultBinaryParserId.length() == 0) {
-			defaultBinaryParserId = CCorePlugin.DEFAULT_BINARY_PARSER_UNIQ_ID;
+			if (Platform.getOS().equals(Platform.OS_WIN32)) {
+				// defaultBinaryParserId = "org.eclipse.cdt.core.GNU_PE64"; //$NON-NLS-1$
+				defaultBinaryParserId = "org.eclipse.cdt.core.Cygwin_PE64"; //$NON-NLS-1$
+			} else if (Platform.getOS().equals(Platform.OS_LINUX)) {
+				defaultBinaryParserId = "org.eclipse.cdt.core.GNU_ELF"; //$NON-NLS-1$
+			} else {
+				defaultBinaryParserId = CCorePlugin.DEFAULT_BINARY_PARSER_UNIQ_ID;
+			}
 		}
 		return new String[] { defaultBinaryParserId };
 	}
diff --git a/llvm/org.eclipse.cdt.managedbuilder.llvm.ui/plugin.xml b/llvm/org.eclipse.cdt.managedbuilder.llvm.ui/plugin.xml
index 727e400485..d9439df015 100644
--- a/llvm/org.eclipse.cdt.managedbuilder.llvm.ui/plugin.xml
+++ b/llvm/org.eclipse.cdt.managedbuilder.llvm.ui/plugin.xml
@@ -154,7 +154,6 @@
 				command="-native"
 				defaultValue="false"
 				id="llvm.link.option.native"
-				isAbstract="false"
 				name="%Option.Posix.Linker.native"
 				resourceFilter="all"
 				tip="%option.tip.6"
@@ -165,7 +164,6 @@
 				command="-native-cbe"
 				defaultValue="false"
 				id="llvm.link.option.nativeCBackEnd"
-				isAbstract="false"
 				name="%Option.Posix.Linker.nativeCBackend"
 				resourceFilter="all"
 				tip="%option.tip.7"
@@ -260,7 +258,6 @@
 		<tool
 			command="llvm-ar"
 			id="cdt.managedbuild.tool.llvm.archiver"
-			isAbstract="true"
 			name="%ToolName.archiver.llvm"
 			natureFilter="both">
 			<supportedProperties>
@@ -298,7 +295,6 @@
 				category="llvm.lib.category.options"
 				command="d"
 				id="llvm.lib.option.delete"
-				isAbstract="false"
 				name="%Option.Posix.Archiver.delete"
 				resourceFilter="all"
 				tip="%option.tip.9"
@@ -308,7 +304,6 @@
 				category="llvm.lib.category.options"
 				command="t"
 				id="llvm.lib.option.print.contents"
-				isAbstract="false"
 				name="%Option.Posix.Archiver.print.contents"
 				resourceFilter="all"
 				valueType="boolean">
@@ -340,7 +335,6 @@
 			command="llvm-as"
 			errorParsers="org.eclipse.cdt.core.GASErrorParser"
 			id="cdt.managedbuild.tool.llvm.assembler"
-			isAbstract="true"
 			name="%ToolName.assembler.llvm"
 			natureFilter="both"
 			outputFlag="-o">
@@ -385,7 +379,6 @@
 		<tool
 			errorParsers="org.eclipse.cdt.core.GCCErrorParser"
 			id="cdt.managedbuild.tool.llvm.compiler"
-			isAbstract="true"
 			name="%ToolName.compiler.llvm"
 			outputFlag="-o">
 			<supportedProperties>
@@ -815,7 +808,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.llvm.linker.output.exe"
-				id="cdt.managedbuild.tool.llvm.c.linker.cygwin.output">
+				id="cdt.managedbuild.tool.llvm.c.linker.cygwin.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -832,7 +825,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.llvm.linker.output.exe"
-				id="cdt.managedbuild.tool.llvm.cpp.linker.cygwin.output">
+				id="cdt.managedbuild.tool.llvm.cpp.linker.cygwin.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -849,7 +842,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.llvm.linker.output.exe"
-				id="cdt.managedbuild.tool.llvm.c.linker.mingw.output">
+				id="cdt.managedbuild.tool.llvm.c.linker.mingw.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -866,7 +859,7 @@
 			<outputType
 				outputs="exe"
 				superClass="cdt.managedbuild.tool.llvm.linker.output.exe"
-				id="cdt.managedbuild.tool.llvm.cpp.linker.mingw.output">
+				id="cdt.managedbuild.tool.llvm.cpp.linker.mingw.output.exe">
 			</outputType>
 			<outputType
 				outputs="dll,dll.a"
@@ -885,7 +878,6 @@
 				archList="all"
 				binaryParser="org.eclipse.cdt.core.ELF"
 				id="cdt.managedbuild.target.llvm.platform.linux.base"
-				isAbstract="true"
 				name="%PlatformName.Dbg"
 				osList="linux,hpux,aix,qnx">
 			</targetPlatform>

real	0m0.223s
user	0m0.062s
sys	0m0.140s
git_diff test0000...HEAD  # at /cygdrive/e/Note/IDE/cdt finished

real	0m0.593s
user	0m0.077s
sys	0m0.185s
git_diff_branch...HEAD  # at /cygdrive/e/Note/IDE/cdt finished
