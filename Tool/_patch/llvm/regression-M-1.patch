diff --git a/lldb/source/Host/windows/MainLoopWindows.cpp b/lldb/source/Host/windows/MainLoopWindows.cpp
index a1de895c0ba9..0c69e3b72736 100644
--- a/lldb/source/Host/windows/MainLoopWindows.cpp
+++ b/lldb/source/Host/windows/MainLoopWindows.cpp
@@ -23,6 +23,8 @@
 #include <winbase.h>
 #include <winerror.h>
 #include <winsock2.h>
+#include <thread>
+#include <atomic>
 
 using namespace lldb;
 using namespace lldb_private;
@@ -57,7 +59,7 @@ public:
       // Keep trying to cancel ReadFile() until the thread exits.
       do {
         CancelIoEx(m_handle, /*lpOverlapped=*/NULL);
-      } while (WaitForSingleObject(m_monitor_thread.native_handle(), 1) ==
+      } while (WaitForSingleObject((HANDLE)(m_monitor_thread.native_handle()), 1) ==
                WAIT_TIMEOUT);
       m_monitor_thread.join();
     }
