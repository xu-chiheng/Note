diff --git a/lldb/source/Host/windows/MainLoopWindows.cpp b/lldb/source/Host/windows/MainLoopWindows.cpp
index b4896dced0a4..cdeaa9cadeed
--- a/lldb/source/Host/windows/MainLoopWindows.cpp
+++ b/lldb/source/Host/windows/MainLoopWindows.cpp
@@ -20,6 +20,8 @@
 #include <ctime>
 #include <vector>
 #include <winsock2.h>
+#include <thread>
+#include <atomic>
 
 using namespace lldb;
 using namespace lldb_private;
@@ -54,7 +56,7 @@ public:
       // Keep trying to cancel ReadFile() until the thread exits.
       do {
         CancelIoEx((HANDLE)m_handle, /*lpOverlapped=*/NULL);
-      } while (WaitForSingleObject(m_monitor_thread.native_handle(), 1) ==
+      } while (WaitForSingleObject((HANDLE)(m_monitor_thread.native_handle()), 1) ==
                WAIT_TIMEOUT);
       m_monitor_thread.join();
     }
